<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#375EAB">

  <title>service - Go Documentation Server</title>

<link type="text/css" rel="stylesheet" href="../../../../../../lib/godoc/style.css">

<script>window.initFuncs = [];</script>
<script src="../../../../../../lib/godoc/jquery.js" defer></script>



<script>var goVersion = "go1.19.10";</script>
<script src="../../../../../../lib/godoc/godocs.js" defer></script>
</head>
<body>

<div id='lowframe' style="position: fixed; bottom: 0; left: 0; height: 0; width: 100%; border-top: thin solid grey; background-color: white; overflow: auto;">
...
</div><!-- #lowframe -->

<div id="topbar" class="wide"><div class="container">
<div class="top-heading" id="heading-wide"><a href="http://localhost:6060/pkg/">Go Documentation Server</a></div>
<div class="top-heading" id="heading-narrow"><a href="http://localhost:6060/pkg/">GoDoc</a></div>
<a href="index.html#" id="menu-button"><span id="menu-button-arrow">&#9661;</span></a>
<form method="GET" action="http://localhost:6060/search">
<div id="menu">

<span class="search-box"><input type="search" id="search" name="q" placeholder="Search" aria-label="Search" required><button type="submit"><span><!-- magnifying glass: --><svg width="24" height="24" viewBox="0 0 24 24"><title>submit search</title><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/><path d="M0 0h24v24H0z" fill="none"/></svg></span></button></span>
</div>
</form>

</div></div>



<div id="page" class="wide">
<div class="container">


  <h1>
    Package service
    <span class="text-muted"></span>
  </h1>







<div id="nav"></div>


<!--
	Copyright 2009 The Go Authors. All rights reserved.
	Use of this source code is governed by a BSD-style
	license that can be found in the LICENSE file.
-->
<!--
	Note: Static (i.e., not template-generated) href and id
	attributes start with "pkg-" to make it impossible for
	them to conflict with generated attributes (some of which
	correspond to Go identifiers).
-->

	<script>
	document.ANALYSIS_DATA = null;
	document.CALLGRAPH = null;
	</script>

	
		
		<div id="short-nav">
			<dl>
			<dd><code>import "github.com/cometbft/cometbft/libs/service"</code></dd>
			</dl>
			<dl>
			<dd><a href="index.html#pkg-overview" class="overviewLink">Overview</a></dd>
			<dd><a href="index.html#pkg-index" class="indexLink">Index</a></dd>
			
			
			</dl>
		</div>
		<!-- The package's Name is printed as title by the top-level template -->
		<div id="pkg-overview" class="toggleVisible">
			<div class="collapsed">
				<h2 class="toggleButton" title="Click to show Overview section">Overview ▹</h2>
			</div>
			<div class="expanded">
				<h2 class="toggleButton" title="Click to hide Overview section">Overview ▾</h2>
				
				
			</div>
		</div>

		<div id="pkg-index" class="toggleVisible">
		<div class="collapsed">
			<h2 class="toggleButton" title="Click to show Index section">Index ▹</h2>
		</div>
		<div class="expanded">
			<h2 class="toggleButton" title="Click to hide Index section">Index ▾</h2>

		<!-- Table of contents for API; must be named manual-nav to turn off auto nav. -->
			<div id="manual-nav">
			<dl>
			
			
				<dd><a href="index.html#pkg-variables">Variables</a></dd>
			
			
			
				
				<dd><a href="index.html#BaseService">type BaseService</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#NewBaseService">func NewBaseService(logger log.Logger, name string, impl Service) *BaseService</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#BaseService.IsRunning">func (bs *BaseService) IsRunning() bool</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#BaseService.OnReset">func (bs *BaseService) OnReset() error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#BaseService.OnStart">func (bs *BaseService) OnStart() error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#BaseService.OnStop">func (bs *BaseService) OnStop()</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#BaseService.Quit">func (bs *BaseService) Quit() &lt;-chan struct{}</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#BaseService.Reset">func (bs *BaseService) Reset() error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#BaseService.SetLogger">func (bs *BaseService) SetLogger(l log.Logger)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#BaseService.Start">func (bs *BaseService) Start() error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#BaseService.Stop">func (bs *BaseService) Stop() error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#BaseService.String">func (bs *BaseService) String() string</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#BaseService.Wait">func (bs *BaseService) Wait()</a></dd>
				
			
				
				<dd><a href="index.html#Service">type Service</a></dd>
				
				
			
			
			</dl>
			</div><!-- #manual-nav -->

		

		
			<h3>Package files</h3>
			<p>
			<span style="font-size:90%">
			
				<a href="http://localhost:6060/src/github.com/cometbft/cometbft/libs/service/service.go">service.go</a>
			
			</span>
			</p>
		
		</div><!-- .expanded -->
		</div><!-- #pkg-index -->

		

		
		
			<h2 id="pkg-variables">Variables</h2>
			
				
				<pre>var (
    <span class="comment">// ErrAlreadyStarted is returned when somebody tries to start an already</span>
    <span class="comment">// running service.</span>
    <span id="ErrAlreadyStarted">ErrAlreadyStarted</span> = <a href="../../../../../errors/index.html">errors</a>.<a href="../../../../../errors/index.html#New">New</a>(&#34;already started&#34;)
    <span class="comment">// ErrAlreadyStopped is returned when somebody tries to stop an already</span>
    <span class="comment">// stopped service (without resetting it).</span>
    <span id="ErrAlreadyStopped">ErrAlreadyStopped</span> = <a href="../../../../../errors/index.html">errors</a>.<a href="../../../../../errors/index.html#New">New</a>(&#34;already stopped&#34;)
    <span class="comment">// ErrNotStarted is returned when somebody tries to stop a not running</span>
    <span class="comment">// service.</span>
    <span id="ErrNotStarted">ErrNotStarted</span> = <a href="../../../../../errors/index.html">errors</a>.<a href="../../../../../errors/index.html#New">New</a>(&#34;not started&#34;)
)</pre>
			
		
		
		
			
			
			<h2 id="BaseService">type <a href="http://localhost:6060/src/github.com/cometbft/cometbft/libs/service/service.go?s=2486:2673#L87">BaseService</a>
				<a class="permalink" href="index.html#BaseService">&#xb6;</a>
				
				
			</h2>
			<p>Classical-inheritance-style service declarations. Services can be started, then
stopped, then optionally restarted.
<p>Users can override the OnStart/OnStop methods. In the absence of errors, these
methods are guaranteed to be called at most once. If OnStart returns an error,
service won&apos;t be marked as started, so the user can call Start again.
<p>A call to Reset will panic, unless OnReset is overwritten, allowing
OnStart/OnStop to be called again.
<p>The caller must ensure that Start and Stop are not called concurrently.
<p>It is ok to call Stop without calling Start first.
<p>Typical usage:
<pre>type FooService struct {
	BaseService
	// private fields
}

func NewFooService() *FooService {
	fs := &amp;FooService{
		// init
	}
	fs.BaseService = *NewBaseService(log, &quot;FooService&quot;, fs)
	return fs
}

func (fs *FooService) OnStart() error {
	fs.BaseService.OnStart() // Always call the overridden method.
	// initialize private fields
	// start subroutines, etc.
}

func (fs *FooService) OnStop() error {
	fs.BaseService.OnStop() // Always call the overridden method.
	// close/destroy private fields
	// stop subroutines, etc.
}
</pre>

			<pre>type BaseService struct {
<span id="BaseService.Logger"></span>    Logger <a href="../log/index.html">log</a>.<a href="../log/index.html#Logger">Logger</a>
    <span class="comment">// contains filtered or unexported fields</span>
}
</pre>

			

			

			
			
			

			
				
				<h3 id="NewBaseService">func <a href="http://localhost:6060/src/github.com/cometbft/cometbft/libs/service/service.go?s=2720:2798#L99">NewBaseService</a>
					<a class="permalink" href="index.html#NewBaseService">&#xb6;</a>
					
					
				</h3>
				<pre>func NewBaseService(logger <a href="../log/index.html">log</a>.<a href="../log/index.html#Logger">Logger</a>, name <a href="../../../../../builtin/index.html#string">string</a>, impl <a href="index.html#Service">Service</a>) *<a href="index.html#BaseService">BaseService</a></pre>
				<p>NewBaseService creates a new BaseService.

				
				
			

			
				
				<h3 id="BaseService.IsRunning">func (*BaseService) <a href="http://localhost:6060/src/github.com/cometbft/cometbft/libs/service/service.go?s=6042:6081#L214">IsRunning</a>
					<a class="permalink" href="index.html#BaseService.IsRunning">&#xb6;</a>
					
					
				</h3>
				<pre>func (bs *<a href="index.html#BaseService">BaseService</a>) IsRunning() <a href="../../../../../builtin/index.html#bool">bool</a></pre>
				<p>IsRunning implements Service by returning true or false depending on the
service&apos;s state.

				
				
				
			
				
				<h3 id="BaseService.OnReset">func (*BaseService) <a href="http://localhost:6060/src/github.com/cometbft/cometbft/libs/service/service.go?s=5864:5902#L208">OnReset</a>
					<a class="permalink" href="index.html#BaseService.OnReset">&#xb6;</a>
					
					
				</h3>
				<pre>func (bs *<a href="index.html#BaseService">BaseService</a>) OnReset() <a href="../../../../../builtin/index.html#error">error</a></pre>
				<p>OnReset implements Service by panicking.

				
				
				
			
				
				<h3 id="BaseService.OnStart">func (*BaseService) <a href="http://localhost:6060/src/github.com/cometbft/cometbft/libs/service/service.go?s=4193:4231#L153">OnStart</a>
					<a class="permalink" href="index.html#BaseService.OnStart">&#xb6;</a>
					
					
				</h3>
				<pre>func (bs *<a href="index.html#BaseService">BaseService</a>) OnStart() <a href="../../../../../builtin/index.html#error">error</a></pre>
				<p>OnStart implements Service by doing nothing.
NOTE: Do not put anything in here,
that way users don&apos;t need to call BaseService.OnStart()

				
				
				
			
				
				<h3 id="BaseService.OnStop">func (*BaseService) <a href="http://localhost:6060/src/github.com/cometbft/cometbft/libs/service/service.go?s=5211:5242#L186">OnStop</a>
					<a class="permalink" href="index.html#BaseService.OnStop">&#xb6;</a>
					
					
				</h3>
				<pre>func (bs *<a href="index.html#BaseService">BaseService</a>) OnStop()</pre>
				<p>OnStop implements Service by doing nothing.
NOTE: Do not put anything in here,
that way users don&apos;t need to call BaseService.OnStop()

				
				
				
			
				
				<h3 id="BaseService.Quit">func (*BaseService) <a href="http://localhost:6060/src/github.com/cometbft/cometbft/libs/service/service.go?s=6459:6504#L229">Quit</a>
					<a class="permalink" href="index.html#BaseService.Quit">&#xb6;</a>
					
					
				</h3>
				<pre>func (bs *<a href="index.html#BaseService">BaseService</a>) Quit() &lt;-chan struct{}</pre>
				<p>Quit Implements Service by returning a quit channel.

				
				
				
			
				
				<h3 id="BaseService.Reset">func (*BaseService) <a href="http://localhost:6060/src/github.com/cometbft/cometbft/libs/service/service.go?s=5373:5409#L190">Reset</a>
					<a class="permalink" href="index.html#BaseService.Reset">&#xb6;</a>
					
					
				</h3>
				<pre>func (bs *<a href="index.html#BaseService">BaseService</a>) Reset() <a href="../../../../../builtin/index.html#error">error</a></pre>
				<p>Reset implements Service by calling OnReset callback (if defined). An error
will be returned if the service is running.

				
				
				
			
				
				<h3 id="BaseService.SetLogger">func (*BaseService) <a href="http://localhost:6060/src/github.com/cometbft/cometbft/libs/service/service.go?s=3017:3063#L113">SetLogger</a>
					<a class="permalink" href="index.html#BaseService.SetLogger">&#xb6;</a>
					
					
				</h3>
				<pre>func (bs *<a href="index.html#BaseService">BaseService</a>) SetLogger(l <a href="../log/index.html">log</a>.<a href="../log/index.html#Logger">Logger</a>)</pre>
				<p>SetLogger implements Service by setting a logger.

				
				
				
			
				
				<h3 id="BaseService.Start">func (*BaseService) <a href="http://localhost:6060/src/github.com/cometbft/cometbft/libs/service/service.go?s=3281:3317#L120">Start</a>
					<a class="permalink" href="index.html#BaseService.Start">&#xb6;</a>
					
					
				</h3>
				<pre>func (bs *<a href="index.html#BaseService">BaseService</a>) Start() <a href="../../../../../builtin/index.html#error">error</a></pre>
				<p>Start implements Service by calling OnStart (if defined). An error will be
returned if the service is already running or stopped. Not to start the
stopped service, you need to call Reset.

				
				
				
			
				
				<h3 id="BaseService.Stop">func (*BaseService) <a href="http://localhost:6060/src/github.com/cometbft/cometbft/libs/service/service.go?s=4396:4431#L157">Stop</a>
					<a class="permalink" href="index.html#BaseService.Stop">&#xb6;</a>
					
					
				</h3>
				<pre>func (bs *<a href="index.html#BaseService">BaseService</a>) Stop() <a href="../../../../../builtin/index.html#error">error</a></pre>
				<p>Stop implements Service by calling OnStop (if defined) and closing quit
channel. An error will be returned if the service is already stopped.

				
				
				
			
				
				<h3 id="BaseService.String">func (*BaseService) <a href="http://localhost:6060/src/github.com/cometbft/cometbft/libs/service/service.go?s=6343:6381#L224">String</a>
					<a class="permalink" href="index.html#BaseService.String">&#xb6;</a>
					
					
				</h3>
				<pre>func (bs *<a href="index.html#BaseService">BaseService</a>) String() <a href="../../../../../builtin/index.html#string">string</a></pre>
				<p>String implements Service by returning a string representation of the service.

				
				
				
			
				
				<h3 id="BaseService.Wait">func (*BaseService) <a href="http://localhost:6060/src/github.com/cometbft/cometbft/libs/service/service.go?s=6215:6244#L219">Wait</a>
					<a class="permalink" href="index.html#BaseService.Wait">&#xb6;</a>
					
					
				</h3>
				<pre>func (bs *<a href="index.html#BaseService">BaseService</a>) Wait()</pre>
				<p>Wait blocks until the service is stopped.

				
				
				
			
		
			
			
			<h2 id="Service">type <a href="http://localhost:6060/src/github.com/cometbft/cometbft/libs/service/service.go?s=624:1338#L14">Service</a>
				<a class="permalink" href="index.html#Service">&#xb6;</a>
				
				
			</h2>
			<p>Service defines a service that can be started, stopped, and reset.

			<pre>type Service interface {
    <span class="comment">// Start the service.</span>
    <span class="comment">// If it&#39;s already started or stopped, will return an error.</span>
    <span class="comment">// If OnStart() returns an error, it&#39;s returned by Start()</span>
    Start() <a href="../../../../../builtin/index.html#error">error</a>
    OnStart() <a href="../../../../../builtin/index.html#error">error</a>

    <span class="comment">// Stop the service.</span>
    <span class="comment">// If it&#39;s already stopped, will return an error.</span>
    <span class="comment">// OnStop must never error.</span>
    Stop() <a href="../../../../../builtin/index.html#error">error</a>
    OnStop()

    <span class="comment">// Reset the service.</span>
    <span class="comment">// Panics by default - must be overwritten to enable reset.</span>
    Reset() <a href="../../../../../builtin/index.html#error">error</a>
    OnReset() <a href="../../../../../builtin/index.html#error">error</a>

    <span class="comment">// Return true if the service is running</span>
    IsRunning() <a href="../../../../../builtin/index.html#bool">bool</a>

    <span class="comment">// Quit returns a channel, which is closed once service is stopped.</span>
    Quit() &lt;-chan struct{}

    <span class="comment">// String representation of the service</span>
    String() <a href="../../../../../builtin/index.html#string">string</a>

    <span class="comment">// SetLogger sets a logger.</span>
    SetLogger(<a href="../log/index.html">log</a>.<a href="../log/index.html#Logger">Logger</a>)
}</pre>

			

			

			
			
			

			

			
		
	

	







<div id="footer">
Build version go1.19.10.<br>
Except as <a href="https://developers.google.com/site-policies#restrictions">noted</a>,
the content of this page is licensed under the
Creative Commons Attribution 3.0 License,
and code is licensed under a <a href="http://localhost:6060/LICENSE">BSD license</a>.<br>
<a href="https://golang.org/doc/tos.html">Terms of Service</a> |
<a href="https://www.google.com/intl/en/policies/privacy/">Privacy Policy</a>
</div>

</div><!-- .container -->
</div><!-- #page -->
</body>
</html>
