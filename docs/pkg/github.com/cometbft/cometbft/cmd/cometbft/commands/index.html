<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#375EAB">

  <title>commands - Go Documentation Server</title>

<link type="text/css" rel="stylesheet" href="../../../../../../../lib/godoc/style.css">

<script>window.initFuncs = [];</script>
<script src="../../../../../../../lib/godoc/jquery.js" defer></script>



<script>var goVersion = "go1.19.10";</script>
<script src="../../../../../../../lib/godoc/godocs.js" defer></script>
</head>
<body>

<div id='lowframe' style="position: fixed; bottom: 0; left: 0; height: 0; width: 100%; border-top: thin solid grey; background-color: white; overflow: auto;">
...
</div><!-- #lowframe -->

<div id="topbar" class="wide"><div class="container">
<div class="top-heading" id="heading-wide"><a href="http://localhost:6060/pkg/">Go Documentation Server</a></div>
<div class="top-heading" id="heading-narrow"><a href="http://localhost:6060/pkg/">GoDoc</a></div>
<a href="index.html#" id="menu-button"><span id="menu-button-arrow">&#9661;</span></a>
<form method="GET" action="http://localhost:6060/search">
<div id="menu">

<span class="search-box"><input type="search" id="search" name="q" placeholder="Search" aria-label="Search" required><button type="submit"><span><!-- magnifying glass: --><svg width="24" height="24" viewBox="0 0 24 24"><title>submit search</title><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/><path d="M0 0h24v24H0z" fill="none"/></svg></span></button></span>
</div>
</form>

</div></div>



<div id="page" class="wide">
<div class="container">


  <h1>
    Package commands
    <span class="text-muted"></span>
  </h1>







<div id="nav"></div>


<!--
	Copyright 2009 The Go Authors. All rights reserved.
	Use of this source code is governed by a BSD-style
	license that can be found in the LICENSE file.
-->
<!--
	Note: Static (i.e., not template-generated) href and id
	attributes start with "pkg-" to make it impossible for
	them to conflict with generated attributes (some of which
	correspond to Go identifiers).
-->

	<script>
	document.ANALYSIS_DATA = null;
	document.CALLGRAPH = null;
	</script>

	
		
		<div id="short-nav">
			<dl>
			<dd><code>import "github.com/cometbft/cometbft/cmd/cometbft/commands"</code></dd>
			</dl>
			<dl>
			<dd><a href="index.html#pkg-overview" class="overviewLink">Overview</a></dd>
			<dd><a href="index.html#pkg-index" class="indexLink">Index</a></dd>
			
			
				<dd><a href="index.html#pkg-subdirectories">Subdirectories</a></dd>
			
			</dl>
		</div>
		<!-- The package's Name is printed as title by the top-level template -->
		<div id="pkg-overview" class="toggleVisible">
			<div class="collapsed">
				<h2 class="toggleButton" title="Click to show Overview section">Overview ▹</h2>
			</div>
			<div class="expanded">
				<h2 class="toggleButton" title="Click to hide Overview section">Overview ▾</h2>
				
				
			</div>
		</div>

		<div id="pkg-index" class="toggleVisible">
		<div class="collapsed">
			<h2 class="toggleButton" title="Click to show Index section">Index ▹</h2>
		</div>
		<div class="expanded">
			<h2 class="toggleButton" title="Click to hide Index section">Index ▾</h2>

		<!-- Table of contents for API; must be named manual-nav to turn off auto nav. -->
			<div id="manual-nav">
			<dl>
			
			
				<dd><a href="index.html#pkg-variables">Variables</a></dd>
			
			
				
				<dd><a href="index.html#AddNodeFlags">func AddNodeFlags(cmd *cobra.Command)</a></dd>
			
				
				<dd><a href="index.html#NewRunNodeCmd">func NewRunNodeCmd(nodeProvider nm.Provider) *cobra.Command</a></dd>
			
				
				<dd><a href="index.html#ParseConfig">func ParseConfig(cmd *cobra.Command) (*cfg.Config, error)</a></dd>
			
				
				<dd><a href="index.html#RollbackState">func RollbackState(config *cfg.Config, removeBlock bool) (int64, []byte, error)</a></dd>
			
			
			
			</dl>
			</div><!-- #manual-nav -->

		

		
			<h3>Package files</h3>
			<p>
			<span style="font-size:90%">
			
				<a href="http://localhost:6060/src/github.com/cometbft/cometbft/cmd/cometbft/commands/compact.go">compact.go</a>
			
				<a href="http://localhost:6060/src/github.com/cometbft/cometbft/cmd/cometbft/commands/gen_node_key.go">gen_node_key.go</a>
			
				<a href="http://localhost:6060/src/github.com/cometbft/cometbft/cmd/cometbft/commands/gen_validator.go">gen_validator.go</a>
			
				<a href="http://localhost:6060/src/github.com/cometbft/cometbft/cmd/cometbft/commands/init.go">init.go</a>
			
				<a href="http://localhost:6060/src/github.com/cometbft/cometbft/cmd/cometbft/commands/light.go">light.go</a>
			
				<a href="http://localhost:6060/src/github.com/cometbft/cometbft/cmd/cometbft/commands/probe_upnp.go">probe_upnp.go</a>
			
				<a href="http://localhost:6060/src/github.com/cometbft/cometbft/cmd/cometbft/commands/reindex_event.go">reindex_event.go</a>
			
				<a href="http://localhost:6060/src/github.com/cometbft/cometbft/cmd/cometbft/commands/replay.go">replay.go</a>
			
				<a href="http://localhost:6060/src/github.com/cometbft/cometbft/cmd/cometbft/commands/reset.go">reset.go</a>
			
				<a href="http://localhost:6060/src/github.com/cometbft/cometbft/cmd/cometbft/commands/rollback.go">rollback.go</a>
			
				<a href="http://localhost:6060/src/github.com/cometbft/cometbft/cmd/cometbft/commands/root.go">root.go</a>
			
				<a href="http://localhost:6060/src/github.com/cometbft/cometbft/cmd/cometbft/commands/run_node.go">run_node.go</a>
			
				<a href="http://localhost:6060/src/github.com/cometbft/cometbft/cmd/cometbft/commands/show_node_id.go">show_node_id.go</a>
			
				<a href="http://localhost:6060/src/github.com/cometbft/cometbft/cmd/cometbft/commands/show_validator.go">show_validator.go</a>
			
				<a href="http://localhost:6060/src/github.com/cometbft/cometbft/cmd/cometbft/commands/testnet.go">testnet.go</a>
			
				<a href="http://localhost:6060/src/github.com/cometbft/cometbft/cmd/cometbft/commands/version.go">version.go</a>
			
			</span>
			</p>
		
		</div><!-- .expanded -->
		</div><!-- #pkg-index -->

		

		
		
			<h2 id="pkg-variables">Variables</h2>
			
				
				<pre>var (
    <span id="ErrHeightNotAvailable">ErrHeightNotAvailable</span> = <a href="../../../../../../errors/index.html">errors</a>.<a href="../../../../../../errors/index.html#New">New</a>(&#34;height is not available&#34;)
    <span id="ErrInvalidRequest">ErrInvalidRequest</span>     = <a href="../../../../../../errors/index.html">errors</a>.<a href="../../../../../../errors/index.html#New">New</a>(&#34;invalid request&#34;)
)</pre>
			
				
				<pre>var <span id="CompactGoLevelDBCmd">CompactGoLevelDBCmd</span> = &amp;<a href="../../../../../spf13/cobra/index.html">cobra</a>.<a href="../../../../../spf13/cobra/index.html#Command">Command</a>{
    <a href="../../../../../spf13/cobra/index.html#Command.Use">Use</a>:     &#34;experimental-compact-goleveldb&#34;,
    <a href="../../../../../spf13/cobra/index.html#Command.Aliases">Aliases</a>: []<a href="../../../../../../builtin/index.html#string">string</a>{&#34;experimental_compact_goleveldb&#34;},
    <a href="../../../../../spf13/cobra/index.html#Command.Short">Short</a>:   &#34;force compacts the CometBFT storage engine (only GoLevelDB supported)&#34;,
    <a href="../../../../../spf13/cobra/index.html#Command.Long">Long</a>: `
This is a temporary utility command that performs a force compaction on the state 
and blockstores to reduce disk space for a pruning node. This should only be run 
once the node has stopped. This command will likely be omitted in the future after
the planned refactor to the storage engine.

Currently, only GoLevelDB is supported.
    `,
    <a href="../../../../../spf13/cobra/index.html#Command.RunE">RunE</a>: func(cmd *<a href="../../../../../spf13/cobra/index.html">cobra</a>.<a href="../../../../../spf13/cobra/index.html#Command">Command</a>, args []<a href="../../../../../../builtin/index.html#string">string</a>) <a href="../../../../../../builtin/index.html#error">error</a> {
        if config.<a href="index.html#DBBackend">DBBackend</a> != &#34;goleveldb&#34; {
            return <a href="../../../../../../errors/index.html">errors</a>.<a href="../../../../../../errors/index.html#New">New</a>(&#34;compaction is currently only supported with goleveldb&#34;)
        }

        compactGoLevelDBs(config.<a href="index.html#RootDir">RootDir</a>, logger)
        return <a href="../../../../../../builtin/index.html#nil">nil</a>
    },
}</pre>
			
				<p>GenNodeKeyCmd allows the generation of a node key. It prints node&apos;s ID to
the standard output.

				<pre>var <span id="GenNodeKeyCmd">GenNodeKeyCmd</span> = &amp;<a href="../../../../../spf13/cobra/index.html">cobra</a>.<a href="../../../../../spf13/cobra/index.html#Command">Command</a>{
    <a href="../../../../../spf13/cobra/index.html#Command.Use">Use</a>:     &#34;gen-node-key&#34;,
    <a href="../../../../../spf13/cobra/index.html#Command.Aliases">Aliases</a>: []<a href="../../../../../../builtin/index.html#string">string</a>{&#34;gen_node_key&#34;},
    <a href="../../../../../spf13/cobra/index.html#Command.Short">Short</a>:   &#34;Generate a node key for this node and print its ID&#34;,
    <a href="../../../../../spf13/cobra/index.html#Command.RunE">RunE</a>:    genNodeKey,
}</pre>
			
				<p>GenValidatorCmd allows the generation of a keypair for a
validator.

				<pre>var <span id="GenValidatorCmd">GenValidatorCmd</span> = &amp;<a href="../../../../../spf13/cobra/index.html">cobra</a>.<a href="../../../../../spf13/cobra/index.html#Command">Command</a>{
    <a href="../../../../../spf13/cobra/index.html#Command.Use">Use</a>:     &#34;gen-validator&#34;,
    <a href="../../../../../spf13/cobra/index.html#Command.Aliases">Aliases</a>: []<a href="../../../../../../builtin/index.html#string">string</a>{&#34;gen_validator&#34;},
    <a href="../../../../../spf13/cobra/index.html#Command.Short">Short</a>:   &#34;Generate new validator keypair&#34;,
    <a href="../../../../../spf13/cobra/index.html#Command.Run">Run</a>:     genValidator,
}</pre>
			
				<p>InitFilesCmd initializes a fresh CometBFT instance.

				<pre>var <span id="InitFilesCmd">InitFilesCmd</span> = &amp;<a href="../../../../../spf13/cobra/index.html">cobra</a>.<a href="../../../../../spf13/cobra/index.html#Command">Command</a>{
    <a href="../../../../../spf13/cobra/index.html#Command.Use">Use</a>:   &#34;init&#34;,
    <a href="../../../../../spf13/cobra/index.html#Command.Short">Short</a>: &#34;Initialize CometBFT&#34;,
    <a href="../../../../../spf13/cobra/index.html#Command.RunE">RunE</a>:  initFiles,
}</pre>
			
				<p>LightCmd represents the base command when called without any subcommands

				<pre>var <span id="LightCmd">LightCmd</span> = &amp;<a href="../../../../../spf13/cobra/index.html">cobra</a>.<a href="../../../../../spf13/cobra/index.html#Command">Command</a>{
    <a href="../../../../../spf13/cobra/index.html#Command.Use">Use</a>:   &#34;light [chainID]&#34;,
    <a href="../../../../../spf13/cobra/index.html#Command.Short">Short</a>: &#34;Run a light client proxy server, verifying CometBFT rpc&#34;,
    <a href="../../../../../spf13/cobra/index.html#Command.Long">Long</a>: `Run a light client proxy server, verifying CometBFT rpc.

All calls that can be tracked back to a block header by a proof
will be verified before passing them back to the caller. Other than
that, it will present the same interface as a full CometBFT node.

Furthermore to the chainID, a fresh instance of a light client will
need a primary RPC address, a trusted hash and height and witness RPC addresses
(if not using sequential verification). To restart the node, thereafter
only the chainID is required.

When /abci_query is called, the Merkle key path format is:

    /{store name}/{key}

Please verify with your application that this Merkle key format is used (true
for applications built w/ Cosmos SDK).
`,
    <a href="../../../../../spf13/cobra/index.html#Command.RunE">RunE</a>: runProxy,
    <a href="../../../../../spf13/cobra/index.html#Command.Args">Args</a>: <a href="../../../../../spf13/cobra/index.html">cobra</a>.<a href="../../../../../spf13/cobra/index.html#ExactArgs">ExactArgs</a>(1),
    <a href="../../../../../spf13/cobra/index.html#Command.Example">Example</a>: `light cosmoshub-3 -p http://52.57.29.196:26657 -w http://public-seed-node.cosmoshub.certus.one:26657
    --height 962118 --hash 28B97BE9F6DE51AC69F70E0B7BFD7E5C9CD1A595B7DC31AFF27C50D4948020CD`,
}</pre>
			
				<p>ProbeUpnpCmd adds capabilities to test the UPnP functionality.

				<pre>var <span id="ProbeUpnpCmd">ProbeUpnpCmd</span> = &amp;<a href="../../../../../spf13/cobra/index.html">cobra</a>.<a href="../../../../../spf13/cobra/index.html#Command">Command</a>{
    <a href="../../../../../spf13/cobra/index.html#Command.Use">Use</a>:     &#34;probe-upnp&#34;,
    <a href="../../../../../spf13/cobra/index.html#Command.Aliases">Aliases</a>: []<a href="../../../../../../builtin/index.html#string">string</a>{&#34;probe_upnp&#34;},
    <a href="../../../../../spf13/cobra/index.html#Command.Short">Short</a>:   &#34;Test UPnP functionality&#34;,
    <a href="../../../../../spf13/cobra/index.html#Command.RunE">RunE</a>:    probeUpnp,
}</pre>
			
				<p>ReIndexEventCmd constructs a command to re-index events in a block height interval.

				<pre>var <span id="ReIndexEventCmd">ReIndexEventCmd</span> = &amp;<a href="../../../../../spf13/cobra/index.html">cobra</a>.<a href="../../../../../spf13/cobra/index.html#Command">Command</a>{
    <a href="../../../../../spf13/cobra/index.html#Command.Use">Use</a>:     &#34;reindex-event&#34;,
    <a href="../../../../../spf13/cobra/index.html#Command.Aliases">Aliases</a>: []<a href="../../../../../../builtin/index.html#string">string</a>{&#34;reindex_event&#34;},
    <a href="../../../../../spf13/cobra/index.html#Command.Short">Short</a>:   &#34;reindex events to the event store backends&#34;,
    <a href="../../../../../spf13/cobra/index.html#Command.Long">Long</a>: `
reindex-event is an offline tooling to re-index block and tx events to the eventsinks,
you can run this command when the event store backend dropped/disconnected or you want to 
replace the backend. The default start-height is 0, meaning the tooling will start 
reindex from the base block height(inclusive); and the default end-height is 0, meaning 
the tooling will reindex until the latest block height(inclusive). User can omit
either or both arguments.

Note: This operation requires ABCI Responses. Do not set DiscardABCIResponses to true if you
want to use this command.
    `,
    <a href="../../../../../spf13/cobra/index.html#Command.Example">Example</a>: `
    cometbft reindex-event
    cometbft reindex-event --start-height 2
    cometbft reindex-event --end-height 10
    cometbft reindex-event --start-height 2 --end-height 10
    `,
    <a href="../../../../../spf13/cobra/index.html#Command.Run">Run</a>: func(cmd *<a href="../../../../../spf13/cobra/index.html">cobra</a>.<a href="../../../../../spf13/cobra/index.html#Command">Command</a>, args []<a href="../../../../../../builtin/index.html#string">string</a>) {
        bs, ss, err := loadStateAndBlockStore(config)
        if err != <a href="../../../../../../builtin/index.html#nil">nil</a> {
            <a href="../../../../../../fmt/index.html">fmt</a>.<a href="../../../../../../fmt/index.html#Println">Println</a>(reindexFailed, err)
            return
        }

        if err := checkValidHeight(bs); err != <a href="../../../../../../builtin/index.html#nil">nil</a> {
            <a href="../../../../../../fmt/index.html">fmt</a>.<a href="../../../../../../fmt/index.html#Println">Println</a>(reindexFailed, err)
            return
        }

        bi, ti, err := loadEventSinks(config)
        if err != <a href="../../../../../../builtin/index.html#nil">nil</a> {
            <a href="../../../../../../fmt/index.html">fmt</a>.<a href="../../../../../../fmt/index.html#Println">Println</a>(reindexFailed, err)
            return
        }

        riArgs := eventReIndexArgs{
            startHeight:  startHeight,
            endHeight:    endHeight,
            blockIndexer: bi,
            txIndexer:    ti,
            blockStore:   bs,
            stateStore:   ss,
        }
        if err := eventReIndex(cmd, riArgs); err != <a href="../../../../../../builtin/index.html#nil">nil</a> {
            <a href="../../../../../../builtin/index.html#panic">panic</a>(<a href="../../../../../../fmt/index.html">fmt</a>.<a href="../../../../../../fmt/index.html#Errorf">Errorf</a>(&#34;%s: %w&#34;, reindexFailed, err))
        }

        <a href="../../../../../../fmt/index.html">fmt</a>.<a href="../../../../../../fmt/index.html#Println">Println</a>(&#34;event re-index finished&#34;)
    },
}</pre>
			
				<p>ReplayCmd allows replaying of messages from the WAL.

				<pre>var <span id="ReplayCmd">ReplayCmd</span> = &amp;<a href="../../../../../spf13/cobra/index.html">cobra</a>.<a href="../../../../../spf13/cobra/index.html#Command">Command</a>{
    <a href="../../../../../spf13/cobra/index.html#Command.Use">Use</a>:   &#34;replay&#34;,
    <a href="../../../../../spf13/cobra/index.html#Command.Short">Short</a>: &#34;Replay messages from WAL&#34;,
    <a href="../../../../../spf13/cobra/index.html#Command.Run">Run</a>: func(cmd *<a href="../../../../../spf13/cobra/index.html">cobra</a>.<a href="../../../../../spf13/cobra/index.html#Command">Command</a>, args []<a href="../../../../../../builtin/index.html#string">string</a>) {
        <a href="../../../consensus/index.html">consensus</a>.<a href="../../../consensus/index.html#RunReplayFile">RunReplayFile</a>(config.<a href="index.html#BaseConfig">BaseConfig</a>, config.<a href="index.html#Consensus">Consensus</a>, <a href="../../../../../../builtin/index.html#false">false</a>)
    },
}</pre>
			
				<p>ReplayConsoleCmd allows replaying of messages from the WAL in a
console.

				<pre>var <span id="ReplayConsoleCmd">ReplayConsoleCmd</span> = &amp;<a href="../../../../../spf13/cobra/index.html">cobra</a>.<a href="../../../../../spf13/cobra/index.html#Command">Command</a>{
    <a href="../../../../../spf13/cobra/index.html#Command.Use">Use</a>:     &#34;replay-console&#34;,
    <a href="../../../../../spf13/cobra/index.html#Command.Aliases">Aliases</a>: []<a href="../../../../../../builtin/index.html#string">string</a>{&#34;replay_console&#34;},
    <a href="../../../../../spf13/cobra/index.html#Command.Short">Short</a>:   &#34;Replay messages from WAL in a console&#34;,
    <a href="../../../../../spf13/cobra/index.html#Command.Run">Run</a>: func(cmd *<a href="../../../../../spf13/cobra/index.html">cobra</a>.<a href="../../../../../spf13/cobra/index.html#Command">Command</a>, args []<a href="../../../../../../builtin/index.html#string">string</a>) {
        <a href="../../../consensus/index.html">consensus</a>.<a href="../../../consensus/index.html#RunReplayFile">RunReplayFile</a>(config.<a href="index.html#BaseConfig">BaseConfig</a>, config.<a href="index.html#Consensus">Consensus</a>, <a href="../../../../../../builtin/index.html#true">true</a>)
    },
}</pre>
			
				<p>ResetAllCmd removes the database of this CometBFT core
instance.

				<pre>var <span id="ResetAllCmd">ResetAllCmd</span> = &amp;<a href="../../../../../spf13/cobra/index.html">cobra</a>.<a href="../../../../../spf13/cobra/index.html#Command">Command</a>{
    <a href="../../../../../spf13/cobra/index.html#Command.Use">Use</a>:     &#34;unsafe-reset-all&#34;,
    <a href="../../../../../spf13/cobra/index.html#Command.Aliases">Aliases</a>: []<a href="../../../../../../builtin/index.html#string">string</a>{&#34;unsafe_reset_all&#34;},
    <a href="../../../../../spf13/cobra/index.html#Command.Short">Short</a>:   &#34;(unsafe) Remove all the data and WAL, reset this node&#39;s validator to genesis state&#34;,
    <a href="../../../../../spf13/cobra/index.html#Command.RunE">RunE</a>:    resetAllCmd,
}</pre>
			
				<p>ResetPrivValidatorCmd resets the private validator files.

				<pre>var <span id="ResetPrivValidatorCmd">ResetPrivValidatorCmd</span> = &amp;<a href="../../../../../spf13/cobra/index.html">cobra</a>.<a href="../../../../../spf13/cobra/index.html#Command">Command</a>{
    <a href="../../../../../spf13/cobra/index.html#Command.Use">Use</a>:     &#34;unsafe-reset-priv-validator&#34;,
    <a href="../../../../../spf13/cobra/index.html#Command.Aliases">Aliases</a>: []<a href="../../../../../../builtin/index.html#string">string</a>{&#34;unsafe_reset_priv_validator&#34;},
    <a href="../../../../../spf13/cobra/index.html#Command.Short">Short</a>:   &#34;(unsafe) Reset this node&#39;s validator to genesis state&#34;,
    <a href="../../../../../spf13/cobra/index.html#Command.RunE">RunE</a>:    resetPrivValidator,
}</pre>
			
				<p>ResetStateCmd removes the database of the specified CometBFT core instance.

				<pre>var <span id="ResetStateCmd">ResetStateCmd</span> = &amp;<a href="../../../../../spf13/cobra/index.html">cobra</a>.<a href="../../../../../spf13/cobra/index.html#Command">Command</a>{
    <a href="../../../../../spf13/cobra/index.html#Command.Use">Use</a>:     &#34;reset-state&#34;,
    <a href="../../../../../spf13/cobra/index.html#Command.Aliases">Aliases</a>: []<a href="../../../../../../builtin/index.html#string">string</a>{&#34;reset_state&#34;},
    <a href="../../../../../spf13/cobra/index.html#Command.Short">Short</a>:   &#34;Remove all the data and WAL&#34;,
    <a href="../../../../../spf13/cobra/index.html#Command.RunE">RunE</a>: func(cmd *<a href="../../../../../spf13/cobra/index.html">cobra</a>.<a href="../../../../../spf13/cobra/index.html#Command">Command</a>, args []<a href="../../../../../../builtin/index.html#string">string</a>) (err <a href="../../../../../../builtin/index.html#error">error</a>) {
        config, err = <a href="index.html#ParseConfig">ParseConfig</a>(cmd)
        if err != <a href="../../../../../../builtin/index.html#nil">nil</a> {
            return err
        }

        return resetState(config.<a href="index.html#DBDir">DBDir</a>(), logger)
    },
}</pre>
			
				
				<pre>var <span id="RollbackStateCmd">RollbackStateCmd</span> = &amp;<a href="../../../../../spf13/cobra/index.html">cobra</a>.<a href="../../../../../spf13/cobra/index.html#Command">Command</a>{
    <a href="../../../../../spf13/cobra/index.html#Command.Use">Use</a>:   &#34;rollback&#34;,
    <a href="../../../../../spf13/cobra/index.html#Command.Short">Short</a>: &#34;rollback CometBFT state by one height&#34;,
    <a href="../../../../../spf13/cobra/index.html#Command.Long">Long</a>: `
A state rollback is performed to recover from an incorrect application state transition,
when CometBFT has persisted an incorrect app hash and is thus unable to make
progress. Rollback overwrites a state at height n with the state at height n - 1.
The application should also roll back to height n - 1. If the --hard flag is not used, 
no blocks will be removed so upon restarting CometBFT the transactions in block n will be 
re-executed against the application. Using --hard will also remove block n. This can
be done multiple times.
`,
    <a href="../../../../../spf13/cobra/index.html#Command.RunE">RunE</a>: func(cmd *<a href="../../../../../spf13/cobra/index.html">cobra</a>.<a href="../../../../../spf13/cobra/index.html#Command">Command</a>, args []<a href="../../../../../../builtin/index.html#string">string</a>) <a href="../../../../../../builtin/index.html#error">error</a> {
        height, hash, err := <a href="index.html#RollbackState">RollbackState</a>(config, removeBlock)
        if err != <a href="../../../../../../builtin/index.html#nil">nil</a> {
            return <a href="../../../../../../fmt/index.html">fmt</a>.<a href="../../../../../../fmt/index.html#Errorf">Errorf</a>(&#34;failed to rollback state: %w&#34;, err)
        }

        if removeBlock {
            <a href="../../../../../../fmt/index.html">fmt</a>.<a href="../../../../../../fmt/index.html#Printf">Printf</a>(&#34;Rolled back both state and block to height %d and hash %X\n&#34;, height, hash)
        } else {
            <a href="../../../../../../fmt/index.html">fmt</a>.<a href="../../../../../../fmt/index.html#Printf">Printf</a>(&#34;Rolled back state to height %d and hash %X\n&#34;, height, hash)
        }

        return <a href="../../../../../../builtin/index.html#nil">nil</a>
    },
}</pre>
			
				<p>RootCmd is the root command for CometBFT core.

				<pre>var <span id="RootCmd">RootCmd</span> = &amp;<a href="../../../../../spf13/cobra/index.html">cobra</a>.<a href="../../../../../spf13/cobra/index.html#Command">Command</a>{
    <a href="../../../../../spf13/cobra/index.html#Command.Use">Use</a>:   &#34;cometbft&#34;,
    <a href="../../../../../spf13/cobra/index.html#Command.Short">Short</a>: &#34;BFT state machine replication for applications in any programming languages&#34;,
    <a href="../../../../../spf13/cobra/index.html#Command.PersistentPreRunE">PersistentPreRunE</a>: func(cmd *<a href="../../../../../spf13/cobra/index.html">cobra</a>.<a href="../../../../../spf13/cobra/index.html#Command">Command</a>, args []<a href="../../../../../../builtin/index.html#string">string</a>) (err <a href="../../../../../../builtin/index.html#error">error</a>) {
        if cmd.<a href="index.html#Name">Name</a>() == <a href="index.html#VersionCmd">VersionCmd</a>.<a href="index.html#Name">Name</a>() {
            return <a href="../../../../../../builtin/index.html#nil">nil</a>
        }

        config, err = <a href="index.html#ParseConfig">ParseConfig</a>(cmd)
        if err != <a href="../../../../../../builtin/index.html#nil">nil</a> {
            return err
        }

        if config.<a href="index.html#LogFormat">LogFormat</a> == <a href="../../../config/index.html">cfg</a>.<a href="../../../config/index.html#LogFormatJSON">LogFormatJSON</a> {
            logger = <a href="../../../libs/log/index.html">log</a>.<a href="../../../libs/log/index.html#NewTMJSONLogger">NewTMJSONLogger</a>(<a href="../../../libs/log/index.html">log</a>.<a href="../../../libs/log/index.html#NewSyncWriter">NewSyncWriter</a>(<a href="../../../../../../os/index.html">os</a>.<a href="../../../../../../os/index.html#Stdout">Stdout</a>))
        }

        logger, err = <a href="../../../libs/cli/flags/index.html">cmtflags</a>.<a href="../../../libs/cli/flags/index.html#ParseLogLevel">ParseLogLevel</a>(config.<a href="index.html#LogLevel">LogLevel</a>, logger, <a href="../../../config/index.html">cfg</a>.<a href="../../../config/index.html#DefaultLogLevel">DefaultLogLevel</a>)
        if err != <a href="../../../../../../builtin/index.html#nil">nil</a> {
            return err
        }

        if <a href="../../../../../spf13/viper/index.html">viper</a>.<a href="../../../../../spf13/viper/index.html#GetBool">GetBool</a>(<a href="../../../libs/cli/index.html">cli</a>.<a href="../../../libs/cli/index.html#TraceFlag">TraceFlag</a>) {
            logger = <a href="../../../libs/log/index.html">log</a>.<a href="../../../libs/log/index.html#NewTracingLogger">NewTracingLogger</a>(logger)
        }

        logger = logger.<a href="index.html#With">With</a>(&#34;module&#34;, &#34;main&#34;)
        return <a href="../../../../../../builtin/index.html#nil">nil</a>
    },
}</pre>
			
				<p>ShowNodeIDCmd dumps node&apos;s ID to the standard output.

				<pre>var <span id="ShowNodeIDCmd">ShowNodeIDCmd</span> = &amp;<a href="../../../../../spf13/cobra/index.html">cobra</a>.<a href="../../../../../spf13/cobra/index.html#Command">Command</a>{
    <a href="../../../../../spf13/cobra/index.html#Command.Use">Use</a>:     &#34;show-node-id&#34;,
    <a href="../../../../../spf13/cobra/index.html#Command.Aliases">Aliases</a>: []<a href="../../../../../../builtin/index.html#string">string</a>{&#34;show_node_id&#34;},
    <a href="../../../../../spf13/cobra/index.html#Command.Short">Short</a>:   &#34;Show this node&#39;s ID&#34;,
    <a href="../../../../../spf13/cobra/index.html#Command.RunE">RunE</a>:    showNodeID,
}</pre>
			
				<p>ShowValidatorCmd adds capabilities for showing the validator info.

				<pre>var <span id="ShowValidatorCmd">ShowValidatorCmd</span> = &amp;<a href="../../../../../spf13/cobra/index.html">cobra</a>.<a href="../../../../../spf13/cobra/index.html#Command">Command</a>{
    <a href="../../../../../spf13/cobra/index.html#Command.Use">Use</a>:     &#34;show-validator&#34;,
    <a href="../../../../../spf13/cobra/index.html#Command.Aliases">Aliases</a>: []<a href="../../../../../../builtin/index.html#string">string</a>{&#34;show_validator&#34;},
    <a href="../../../../../spf13/cobra/index.html#Command.Short">Short</a>:   &#34;Show this node&#39;s validator info&#34;,
    <a href="../../../../../spf13/cobra/index.html#Command.RunE">RunE</a>:    showValidator,
}</pre>
			
				<p>TestnetFilesCmd allows initialisation of files for a CometBFT testnet.

				<pre>var <span id="TestnetFilesCmd">TestnetFilesCmd</span> = &amp;<a href="../../../../../spf13/cobra/index.html">cobra</a>.<a href="../../../../../spf13/cobra/index.html#Command">Command</a>{
    <a href="../../../../../spf13/cobra/index.html#Command.Use">Use</a>:   &#34;testnet&#34;,
    <a href="../../../../../spf13/cobra/index.html#Command.Short">Short</a>: &#34;Initialize files for a CometBFT testnet&#34;,
    <a href="../../../../../spf13/cobra/index.html#Command.Long">Long</a>: `testnet will create &#34;v&#34; + &#34;n&#34; number of directories and populate each with
necessary files (private validator, genesis, config, etc.).

Note, strict routability for addresses is turned off in the config file.

Optionally, it will fill in persistent_peers list in config file using either hostnames or IPs.

Example:

    cometbft testnet --v 4 --o ./output --populate-persistent-peers --starting-ip-address 192.168.10.2
    `,
    <a href="../../../../../spf13/cobra/index.html#Command.RunE">RunE</a>: testnetFiles,
}</pre>
			
				<p>VersionCmd ...

				<pre>var <span id="VersionCmd">VersionCmd</span> = &amp;<a href="../../../../../spf13/cobra/index.html">cobra</a>.<a href="../../../../../spf13/cobra/index.html#Command">Command</a>{
    <a href="../../../../../spf13/cobra/index.html#Command.Use">Use</a>:   &#34;version&#34;,
    <a href="../../../../../spf13/cobra/index.html#Command.Short">Short</a>: &#34;Show version info&#34;,
    <a href="../../../../../spf13/cobra/index.html#Command.Run">Run</a>: func(cmd *<a href="../../../../../spf13/cobra/index.html">cobra</a>.<a href="../../../../../spf13/cobra/index.html#Command">Command</a>, args []<a href="../../../../../../builtin/index.html#string">string</a>) {
        cmtVersion := <a href="../../../version/index.html">version</a>.<a href="../../../version/index.html#TMCoreSemVer">TMCoreSemVer</a>
        if <a href="../../../version/index.html">version</a>.<a href="../../../version/index.html#TMGitCommitHash">TMGitCommitHash</a> != &#34;&#34; {
            cmtVersion += &#34;+&#34; + <a href="../../../version/index.html">version</a>.<a href="../../../version/index.html#TMGitCommitHash">TMGitCommitHash</a>
        }

        if verbose {
            values, _ := <a href="../../../../../../encoding/json/index.html">json</a>.<a href="../../../../../../encoding/json/index.html#MarshalIndent">MarshalIndent</a>(struct {
                CometBFT      <a href="../../../../../../builtin/index.html#string">string</a> `json:&#34;cometbft&#34;`
                ABCI          <a href="../../../../../../builtin/index.html#string">string</a> `json:&#34;abci&#34;`
                BlockProtocol <a href="../../../../../../builtin/index.html#uint64">uint64</a> `json:&#34;block_protocol&#34;`
                P2PProtocol   <a href="../../../../../../builtin/index.html#uint64">uint64</a> `json:&#34;p2p_protocol&#34;`
            }{
                <a href="index.html#CometBFT">CometBFT</a>:      cmtVersion,
                <a href="index.html#ABCI">ABCI</a>:          <a href="../../../version/index.html">version</a>.<a href="../../../version/index.html#ABCISemVer">ABCISemVer</a>,
                <a href="index.html#BlockProtocol">BlockProtocol</a>: <a href="../../../version/index.html">version</a>.<a href="../../../version/index.html#BlockProtocol">BlockProtocol</a>,
                <a href="index.html#P2PProtocol">P2PProtocol</a>:   <a href="../../../version/index.html">version</a>.<a href="../../../version/index.html#P2PProtocol">P2PProtocol</a>,
            }, &#34;&#34;, &#34;  &#34;)
            <a href="../../../../../../fmt/index.html">fmt</a>.<a href="../../../../../../fmt/index.html#Println">Println</a>(<a href="../../../../../../builtin/index.html#string">string</a>(values))
        } else {
            <a href="../../../../../../fmt/index.html">fmt</a>.<a href="../../../../../../fmt/index.html#Println">Println</a>(cmtVersion)
        }
    },
}</pre>
			
		
		
			
			
			<h2 id="AddNodeFlags">func <a href="http://localhost:6060/src/github.com/cometbft/cometbft/cmd/cometbft/commands/run_node.go?s=414:451#L13">AddNodeFlags</a>
				<a class="permalink" href="index.html#AddNodeFlags">&#xb6;</a>
				
				
			</h2>
			<pre>func AddNodeFlags(cmd *<a href="../../../../../spf13/cobra/index.html">cobra</a>.<a href="../../../../../spf13/cobra/index.html#Command">Command</a>)</pre>
			<p>AddNodeFlags exposes some common configuration options on the command-line
These are exposed for convenience of commands embedding a CometBFT node

			
			

		
			
			
			<h2 id="NewRunNodeCmd">func <a href="http://localhost:6060/src/github.com/cometbft/cometbft/cmd/cometbft/commands/run_node.go?s=3619:3678#L89">NewRunNodeCmd</a>
				<a class="permalink" href="index.html#NewRunNodeCmd">&#xb6;</a>
				
				
			</h2>
			<pre>func NewRunNodeCmd(nodeProvider <a href="../../../node/index.html">nm</a>.<a href="../../../node/index.html#Provider">Provider</a>) *<a href="../../../../../spf13/cobra/index.html">cobra</a>.<a href="../../../../../spf13/cobra/index.html#Command">Command</a></pre>
			<p>NewRunNodeCmd returns the command that allows the CLI to start a node.
It can be used with a custom PrivValidator and in-process ABCI application.

			
			

		
			
			
			<h2 id="ParseConfig">func <a href="http://localhost:6060/src/github.com/cometbft/cometbft/cmd/cometbft/commands/root.go?s=671:728#L21">ParseConfig</a>
				<a class="permalink" href="index.html#ParseConfig">&#xb6;</a>
				
				
			</h2>
			<pre>func ParseConfig(cmd *<a href="../../../../../spf13/cobra/index.html">cobra</a>.<a href="../../../../../spf13/cobra/index.html#Command">Command</a>) (*<a href="../../../config/index.html">cfg</a>.<a href="../../../config/index.html#Config">Config</a>, <a href="../../../../../../builtin/index.html#error">error</a>)</pre>
			<p>ParseConfig retrieves the default environment configuration,
sets up the CometBFT root and ensures that the root exists

			
			

		
			
			
			<h2 id="RollbackState">func <a href="http://localhost:6060/src/github.com/cometbft/cometbft/cmd/cometbft/commands/rollback.go?s=1755:1834#L44">RollbackState</a>
				<a class="permalink" href="index.html#RollbackState">&#xb6;</a>
				
				
			</h2>
			<pre>func RollbackState(config *<a href="../../../config/index.html">cfg</a>.<a href="../../../config/index.html#Config">Config</a>, removeBlock <a href="../../../../../../builtin/index.html#bool">bool</a>) (<a href="../../../../../../builtin/index.html#int64">int64</a>, []<a href="../../../../../../builtin/index.html#byte">byte</a>, <a href="../../../../../../builtin/index.html#error">error</a>)</pre>
			<p>RollbackState takes the state at the current height n and overwrites it with the state
at height n - 1. Note state here refers to CometBFT state not application state.
Returns the latest state height and app hash alongside an error if there was one.

			
			

		
		
	

	





	
	
		<h2 id="pkg-subdirectories">Subdirectories</h2>
	
	<div class="pkg-dir">
		<table>
			<tr>
				<th class="pkg-name">Name</th>
				<th class="pkg-synopsis">Synopsis</th>
			</tr>

			
			<tr>
				<td colspan="2"><a href="../index.html">..</a></td>
			</tr>
			

			
				<tr>
				
					<td class="pkg-name" style="padding-left: 0px;">
						<a href="debug/index.html">debug</a>
					</td>
				
					<td class="pkg-synopsis">
						
					</td>
				</tr>
			
		</table>
	</div>



<div id="footer">
Build version go1.19.10.<br>
Except as <a href="https://developers.google.com/site-policies#restrictions">noted</a>,
the content of this page is licensed under the
Creative Commons Attribution 3.0 License,
and code is licensed under a <a href="http://localhost:6060/LICENSE">BSD license</a>.<br>
<a href="https://golang.org/doc/tos.html">Terms of Service</a> |
<a href="https://www.google.com/intl/en/policies/privacy/">Privacy Policy</a>
</div>

</div><!-- .container -->
</div><!-- #page -->
</body>
</html>
