<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#375EAB">

  <title>snap - Go Documentation Server</title>

<link type="text/css" rel="stylesheet" href="../../../../../../../lib/godoc/style.css">

<script>window.initFuncs = [];</script>
<script src="../../../../../../../lib/godoc/jquery.js" defer></script>



<script>var goVersion = "go1.19.10";</script>
<script src="../../../../../../../lib/godoc/godocs.js" defer></script>
</head>
<body>

<div id='lowframe' style="position: fixed; bottom: 0; left: 0; height: 0; width: 100%; border-top: thin solid grey; background-color: white; overflow: auto;">
...
</div><!-- #lowframe -->

<div id="topbar" class="wide"><div class="container">
<div class="top-heading" id="heading-wide"><a href="http://localhost:6060/pkg/">Go Documentation Server</a></div>
<div class="top-heading" id="heading-narrow"><a href="http://localhost:6060/pkg/">GoDoc</a></div>
<a href="index.html#" id="menu-button"><span id="menu-button-arrow">&#9661;</span></a>
<form method="GET" action="http://localhost:6060/search">
<div id="menu">

<span class="search-box"><input type="search" id="search" name="q" placeholder="Search" aria-label="Search" required><button type="submit"><span><!-- magnifying glass: --><svg width="24" height="24" viewBox="0 0 24 24"><title>submit search</title><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/><path d="M0 0h24v24H0z" fill="none"/></svg></span></button></span>
</div>
</form>

</div></div>



<div id="page" class="wide">
<div class="container">


  <h1>
    Package snap
    <span class="text-muted"></span>
  </h1>







<div id="nav"></div>


<!--
	Copyright 2009 The Go Authors. All rights reserved.
	Use of this source code is governed by a BSD-style
	license that can be found in the LICENSE file.
-->
<!--
	Note: Static (i.e., not template-generated) href and id
	attributes start with "pkg-" to make it impossible for
	them to conflict with generated attributes (some of which
	correspond to Go identifiers).
-->

	<script>
	document.ANALYSIS_DATA = null;
	document.CALLGRAPH = null;
	</script>

	
		
		<div id="short-nav">
			<dl>
			<dd><code>import "github.com/ethereum/go-ethereum/eth/protocols/snap"</code></dd>
			</dl>
			<dl>
			<dd><a href="index.html#pkg-overview" class="overviewLink">Overview</a></dd>
			<dd><a href="index.html#pkg-index" class="indexLink">Index</a></dd>
			
			
			</dl>
		</div>
		<!-- The package's Name is printed as title by the top-level template -->
		<div id="pkg-overview" class="toggleVisible">
			<div class="collapsed">
				<h2 class="toggleButton" title="Click to show Overview section">Overview ▹</h2>
			</div>
			<div class="expanded">
				<h2 class="toggleButton" title="Click to hide Overview section">Overview ▾</h2>
				
				
			</div>
		</div>

		<div id="pkg-index" class="toggleVisible">
		<div class="collapsed">
			<h2 class="toggleButton" title="Click to show Index section">Index ▹</h2>
		</div>
		<div class="expanded">
			<h2 class="toggleButton" title="Click to hide Index section">Index ▾</h2>

		<!-- Table of contents for API; must be named manual-nav to turn off auto nav. -->
			<div id="manual-nav">
			<dl>
			
				<dd><a href="index.html#pkg-constants">Constants</a></dd>
			
			
				<dd><a href="index.html#pkg-variables">Variables</a></dd>
			
			
				
				<dd><a href="index.html#Handle">func Handle(backend Backend, peer *Peer) error</a></dd>
			
				
				<dd><a href="index.html#HandleMessage">func HandleMessage(backend Backend, peer *Peer) error</a></dd>
			
				
				<dd><a href="index.html#MakeProtocols">func MakeProtocols(backend Backend, dnsdisc enode.Iterator) []p2p.Protocol</a></dd>
			
				
				<dd><a href="index.html#ServiceGetByteCodesQuery">func ServiceGetByteCodesQuery(chain *core.BlockChain, req *GetByteCodesPacket) [][]byte</a></dd>
			
				
				<dd><a href="index.html#ServiceGetStorageRangesQuery">func ServiceGetStorageRangesQuery(chain *core.BlockChain, req *GetStorageRangesPacket) ([][]*StorageData, [][]byte)</a></dd>
			
				
				<dd><a href="index.html#ServiceGetTrieNodesQuery">func ServiceGetTrieNodesQuery(chain *core.BlockChain, req *GetTrieNodesPacket, start time.Time) ([][]byte, error)</a></dd>
			
			
				
				<dd><a href="index.html#AccountData">type AccountData</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#ServiceGetAccountRangeQuery">func ServiceGetAccountRangeQuery(chain *core.BlockChain, req *GetAccountRangePacket) ([]*AccountData, [][]byte)</a></dd>
				
				
			
				
				<dd><a href="index.html#AccountRangePacket">type AccountRangePacket</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#AccountRangePacket.Kind">func (*AccountRangePacket) Kind() byte</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#AccountRangePacket.Name">func (*AccountRangePacket) Name() string</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#AccountRangePacket.Unpack">func (p *AccountRangePacket) Unpack() ([]common.Hash, [][]byte, error)</a></dd>
				
			
				
				<dd><a href="index.html#Backend">type Backend</a></dd>
				
				
			
				
				<dd><a href="index.html#ByteCodesPacket">type ByteCodesPacket</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#ByteCodesPacket.Kind">func (*ByteCodesPacket) Kind() byte</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#ByteCodesPacket.Name">func (*ByteCodesPacket) Name() string</a></dd>
				
			
				
				<dd><a href="index.html#GetAccountRangePacket">type GetAccountRangePacket</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#GetAccountRangePacket.Kind">func (*GetAccountRangePacket) Kind() byte</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#GetAccountRangePacket.Name">func (*GetAccountRangePacket) Name() string</a></dd>
				
			
				
				<dd><a href="index.html#GetByteCodesPacket">type GetByteCodesPacket</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#GetByteCodesPacket.Kind">func (*GetByteCodesPacket) Kind() byte</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#GetByteCodesPacket.Name">func (*GetByteCodesPacket) Name() string</a></dd>
				
			
				
				<dd><a href="index.html#GetStorageRangesPacket">type GetStorageRangesPacket</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#GetStorageRangesPacket.Kind">func (*GetStorageRangesPacket) Kind() byte</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#GetStorageRangesPacket.Name">func (*GetStorageRangesPacket) Name() string</a></dd>
				
			
				
				<dd><a href="index.html#GetTrieNodesPacket">type GetTrieNodesPacket</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#GetTrieNodesPacket.Kind">func (*GetTrieNodesPacket) Kind() byte</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#GetTrieNodesPacket.Name">func (*GetTrieNodesPacket) Name() string</a></dd>
				
			
				
				<dd><a href="index.html#Handler">type Handler</a></dd>
				
				
			
				
				<dd><a href="index.html#NodeInfo">type NodeInfo</a></dd>
				
				
			
				
				<dd><a href="index.html#Packet">type Packet</a></dd>
				
				
			
				
				<dd><a href="index.html#Peer">type Peer</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#NewFakePeer">func NewFakePeer(version uint, id string, rw p2p.MsgReadWriter) *Peer</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#NewPeer">func NewPeer(version uint, p *p2p.Peer, rw p2p.MsgReadWriter) *Peer</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#Peer.ID">func (p *Peer) ID() string</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#Peer.Log">func (p *Peer) Log() log.Logger</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#Peer.RequestAccountRange">func (p *Peer) RequestAccountRange(id uint64, root common.Hash, origin, limit common.Hash, bytes uint64) error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#Peer.RequestByteCodes">func (p *Peer) RequestByteCodes(id uint64, hashes []common.Hash, bytes uint64) error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#Peer.RequestStorageRanges">func (p *Peer) RequestStorageRanges(id uint64, root common.Hash, accounts []common.Hash, origin, limit []byte, bytes uint64) error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#Peer.RequestTrieNodes">func (p *Peer) RequestTrieNodes(id uint64, root common.Hash, paths []TrieNodePathSet, bytes uint64) error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#Peer.Version">func (p *Peer) Version() uint</a></dd>
				
			
				
				<dd><a href="index.html#StorageData">type StorageData</a></dd>
				
				
			
				
				<dd><a href="index.html#StorageRangesPacket">type StorageRangesPacket</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#StorageRangesPacket.Kind">func (*StorageRangesPacket) Kind() byte</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#StorageRangesPacket.Name">func (*StorageRangesPacket) Name() string</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#StorageRangesPacket.Unpack">func (p *StorageRangesPacket) Unpack() ([][]common.Hash, [][][]byte)</a></dd>
				
			
				
				<dd><a href="index.html#SyncPeer">type SyncPeer</a></dd>
				
				
			
				
				<dd><a href="index.html#SyncPending">type SyncPending</a></dd>
				
				
			
				
				<dd><a href="index.html#SyncProgress">type SyncProgress</a></dd>
				
				
			
				
				<dd><a href="index.html#Syncer">type Syncer</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#NewSyncer">func NewSyncer(db ethdb.KeyValueStore) *Syncer</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#Syncer.OnAccounts">func (s *Syncer) OnAccounts(peer SyncPeer, id uint64, hashes []common.Hash, accounts [][]byte, proof [][]byte) error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#Syncer.OnByteCodes">func (s *Syncer) OnByteCodes(peer SyncPeer, id uint64, bytecodes [][]byte) error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#Syncer.OnStorage">func (s *Syncer) OnStorage(peer SyncPeer, id uint64, hashes [][]common.Hash, slots [][][]byte, proof [][]byte) error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#Syncer.OnTrieNodes">func (s *Syncer) OnTrieNodes(peer SyncPeer, id uint64, trienodes [][]byte) error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#Syncer.Progress">func (s *Syncer) Progress() (*SyncProgress, *SyncPending)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#Syncer.Register">func (s *Syncer) Register(peer SyncPeer) error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#Syncer.Sync">func (s *Syncer) Sync(root common.Hash, cancel chan struct{}) error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#Syncer.Unregister">func (s *Syncer) Unregister(id string) error</a></dd>
				
			
				
				<dd><a href="index.html#TrieNodePathSet">type TrieNodePathSet</a></dd>
				
				
			
				
				<dd><a href="index.html#TrieNodesPacket">type TrieNodesPacket</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#TrieNodesPacket.Kind">func (*TrieNodesPacket) Kind() byte</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#TrieNodesPacket.Name">func (*TrieNodesPacket) Name() string</a></dd>
				
			
			
			</dl>
			</div><!-- #manual-nav -->

		

		
			<h3>Package files</h3>
			<p>
			<span style="font-size:90%">
			
				<a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/discovery.go">discovery.go</a>
			
				<a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/handler.go">handler.go</a>
			
				<a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/peer.go">peer.go</a>
			
				<a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/protocol.go">protocol.go</a>
			
				<a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/range.go">range.go</a>
			
				<a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/sync.go">sync.go</a>
			
				<a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/tracker.go">tracker.go</a>
			
			</span>
			</p>
		
		</div><!-- .expanded -->
		</div><!-- #pkg-index -->

		

		
			<h2 id="pkg-constants">Constants</h2>
			
				
				<pre>const (
    <span id="GetAccountRangeMsg">GetAccountRangeMsg</span>  = 0x00
    <span id="AccountRangeMsg">AccountRangeMsg</span>     = 0x01
    <span id="GetStorageRangesMsg">GetStorageRangesMsg</span> = 0x02
    <span id="StorageRangesMsg">StorageRangesMsg</span>    = 0x03
    <span id="GetByteCodesMsg">GetByteCodesMsg</span>     = 0x04
    <span id="ByteCodesMsg">ByteCodesMsg</span>        = 0x05
    <span id="GetTrieNodesMsg">GetTrieNodesMsg</span>     = 0x06
    <span id="TrieNodesMsg">TrieNodesMsg</span>        = 0x07
)</pre>
			
				<p>ProtocolName is the official short name of the `snap` protocol used during
devp2p capability negotiation.

				<pre>const <span id="ProtocolName">ProtocolName</span> = &#34;snap&#34;</pre>
			
				<p>Constants to match up protocol versions and messages

				<pre>const (
    <span id="SNAP1">SNAP1</span> = 1
)</pre>
			
		
		
			<h2 id="pkg-variables">Variables</h2>
			
				<p>ErrCancelled is returned from snap syncing if the operation was prematurely
terminated.

				<pre>var <span id="ErrCancelled">ErrCancelled</span> = <a href="../../../../../../errors/index.html">errors</a>.<a href="../../../../../../errors/index.html#New">New</a>(&#34;sync cancelled&#34;)</pre>
			
				<p>ProtocolVersions are the supported versions of the `snap` protocol (first
is primary).

				<pre>var <span id="ProtocolVersions">ProtocolVersions</span> = []<a href="../../../../../../builtin/index.html#uint">uint</a>{<a href="index.html#SNAP1">SNAP1</a>}</pre>
			
		
		
			
			
			<h2 id="Handle">func <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/handler.go?s=4327:4373#L109">Handle</a>
				<a class="permalink" href="index.html#Handle">&#xb6;</a>
				
				
			</h2>
			<pre>func Handle(backend <a href="index.html#Backend">Backend</a>, peer *<a href="index.html#Peer">Peer</a>) <a href="../../../../../../builtin/index.html#error">error</a></pre>
			<p>Handle is the callback invoked to manage the life cycle of a `snap` peer.
When this function terminates, the peer is disconnected.

			
			

		
			
			
			<h2 id="HandleMessage">func <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/handler.go?s=4709:4762#L121">HandleMessage</a>
				<a class="permalink" href="index.html#HandleMessage">&#xb6;</a>
				
				
			</h2>
			<pre>func HandleMessage(backend <a href="index.html#Backend">Backend</a>, peer *<a href="index.html#Peer">Peer</a>) <a href="../../../../../../builtin/index.html#error">error</a></pre>
			<p>HandleMessage is invoked whenever an inbound message is received from a
remote peer on the `snap` protocol. The remote connection is torn down upon
returning any error.

			
			

		
			
			
			<h2 id="MakeProtocols">func <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/handler.go?s=3236:3310#L74">MakeProtocols</a>
				<a class="permalink" href="index.html#MakeProtocols">&#xb6;</a>
				
				
			</h2>
			<pre>func MakeProtocols(backend <a href="index.html#Backend">Backend</a>, dnsdisc <a href="../../../p2p/enode/index.html">enode</a>.<a href="../../../p2p/enode/index.html#Iterator">Iterator</a>) []<a href="../../../p2p/index.html">p2p</a>.<a href="../../../p2p/index.html#Protocol">Protocol</a></pre>
			<p>MakeProtocols constructs the P2P protocol definitions for `snap`.

			
			

		
			
			
			<h2 id="ServiceGetByteCodesQuery">func <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/handler.go?s=15564:15651#L443">ServiceGetByteCodesQuery</a>
				<a class="permalink" href="index.html#ServiceGetByteCodesQuery">&#xb6;</a>
				
				
			</h2>
			<pre>func ServiceGetByteCodesQuery(chain *<a href="../../../core/index.html">core</a>.<a href="../../../core/index.html#BlockChain">BlockChain</a>, req *<a href="index.html#GetByteCodesPacket">GetByteCodesPacket</a>) [][]<a href="../../../../../../builtin/index.html#byte">byte</a></pre>
			<p>ServiceGetByteCodesQuery assembles the response to a byte codes query.
It is exposed to allow external packages to test protocol behavior.

			
			

		
			
			
			<h2 id="ServiceGetStorageRangesQuery">func <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/handler.go?s=11752:11867#L331">ServiceGetStorageRangesQuery</a>
				<a class="permalink" href="index.html#ServiceGetStorageRangesQuery">&#xb6;</a>
				
				
			</h2>
			<pre>func ServiceGetStorageRangesQuery(chain *<a href="../../../core/index.html">core</a>.<a href="../../../core/index.html#BlockChain">BlockChain</a>, req *<a href="index.html#GetStorageRangesPacket">GetStorageRangesPacket</a>) ([][]*<a href="index.html#StorageData">StorageData</a>, [][]<a href="../../../../../../builtin/index.html#byte">byte</a>)</pre>
			
			
			

		
			
			
			<h2 id="ServiceGetTrieNodesQuery">func <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/handler.go?s=16482:16595#L473">ServiceGetTrieNodesQuery</a>
				<a class="permalink" href="index.html#ServiceGetTrieNodesQuery">&#xb6;</a>
				
				
			</h2>
			<pre>func ServiceGetTrieNodesQuery(chain *<a href="../../../core/index.html">core</a>.<a href="../../../core/index.html#BlockChain">BlockChain</a>, req *<a href="index.html#GetTrieNodesPacket">GetTrieNodesPacket</a>, start <a href="../../../../../../time/index.html">time</a>.<a href="../../../../../../time/index.html#Time">Time</a>) ([][]<a href="../../../../../../builtin/index.html#byte">byte</a>, <a href="../../../../../../builtin/index.html#error">error</a>)</pre>
			<p>ServiceGetTrieNodesQuery assembles the response to a trie nodes query.
It is exposed to allow external packages to test protocol behavior.

			
			

		
		
			
			
			<h2 id="AccountData">type <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/protocol.go?s=3027:3146#L79">AccountData</a>
				<a class="permalink" href="index.html#AccountData">&#xb6;</a>
				
				
			</h2>
			<p>AccountData represents a single account in a query response.

			<pre>type AccountData struct {
<span id="AccountData.Hash"></span>    Hash <a href="../../../common/index.html">common</a>.<a href="../../../common/index.html#Hash">Hash</a>  <span class="comment">// Hash of the account</span>
<span id="AccountData.Body"></span>    Body <a href="../../../rlp/index.html">rlp</a>.<a href="../../../rlp/index.html#RawValue">RawValue</a> <span class="comment">// Account body in slim format</span>
}
</pre>

			

			

			
			
			

			
				
				<h3 id="ServiceGetAccountRangeQuery">func <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/handler.go?s=10116:10227#L271">ServiceGetAccountRangeQuery</a>
					<a class="permalink" href="index.html#ServiceGetAccountRangeQuery">&#xb6;</a>
					
					
				</h3>
				<pre>func ServiceGetAccountRangeQuery(chain *<a href="../../../core/index.html">core</a>.<a href="../../../core/index.html#BlockChain">BlockChain</a>, req *<a href="index.html#GetAccountRangePacket">GetAccountRangePacket</a>) ([]*<a href="index.html#AccountData">AccountData</a>, [][]<a href="../../../../../../builtin/index.html#byte">byte</a>)</pre>
				<p>ServiceGetAccountRangeQuery assembles the response to an account range query.
It is exposed to allow external packages to test protocol behavior.

				
				
			

			
		
			
			
			<h2 id="AccountRangePacket">type <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/protocol.go?s=2714:2961#L72">AccountRangePacket</a>
				<a class="permalink" href="index.html#AccountRangePacket">&#xb6;</a>
				
				
			</h2>
			<p>AccountRangePacket represents an account query response.

			<pre>type AccountRangePacket struct {
<span id="AccountRangePacket.ID"></span>    ID       <a href="../../../../../../builtin/index.html#uint64">uint64</a>         <span class="comment">// ID of the request this is a response for</span>
<span id="AccountRangePacket.Accounts"></span>    Accounts []*<a href="index.html#AccountData">AccountData</a> <span class="comment">// List of consecutive accounts from the trie</span>
<span id="AccountRangePacket.Proof"></span>    Proof    [][]<a href="../../../../../../builtin/index.html#byte">byte</a>       <span class="comment">// List of trie nodes proving the account range</span>
}
</pre>

			

			

			
			
			

			

			
				
				<h3 id="AccountRangePacket.Kind">func (*AccountRangePacket) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/protocol.go?s=7670:7708#L190">Kind</a>
					<a class="permalink" href="index.html#AccountRangePacket.Kind">&#xb6;</a>
					
					
				</h3>
				<pre>func (*<a href="index.html#AccountRangePacket">AccountRangePacket</a>) Kind() <a href="../../../../../../builtin/index.html#byte">byte</a></pre>
				
				
				
				
			
				
				<h3 id="AccountRangePacket.Name">func (*AccountRangePacket) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/protocol.go?s=7603:7643#L189">Name</a>
					<a class="permalink" href="index.html#AccountRangePacket.Name">&#xb6;</a>
					
					
				</h3>
				<pre>func (*<a href="index.html#AccountRangePacket">AccountRangePacket</a>) Name() <a href="../../../../../../builtin/index.html#string">string</a></pre>
				
				
				
				
			
				
				<h3 id="AccountRangePacket.Unpack">func (*AccountRangePacket) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/protocol.go?s=3580:3650#L91">Unpack</a>
					<a class="permalink" href="index.html#AccountRangePacket.Unpack">&#xb6;</a>
					
					
				</h3>
				<pre>func (p *<a href="index.html#AccountRangePacket">AccountRangePacket</a>) Unpack() ([]<a href="../../../common/index.html">common</a>.<a href="../../../common/index.html#Hash">Hash</a>, [][]<a href="../../../../../../builtin/index.html#byte">byte</a>, <a href="../../../../../../builtin/index.html#error">error</a>)</pre>
				<p>Unpack retrieves the accounts from the range packet and converts from slim
wire representation to consensus format. The returned data is RLP encoded
since it&apos;s expected to be serialized to disk without further interpretation.
<p>Note, this method does a round of RLP decoding and reencoding, so only use it
once and cache the results if need be. Ideally discard the packet afterwards
to not double the memory use.

				
				
				
			
		
			
			
			<h2 id="Backend">type <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/handler.go?s=2419:3165#L54">Backend</a>
				<a class="permalink" href="index.html#Backend">&#xb6;</a>
				
				
			</h2>
			<p>Backend defines the data retrieval methods to serve remote requests and the
callback methods to invoke on remote deliveries.

			<pre>type Backend interface {
    <span class="comment">// Chain retrieves the blockchain object to serve data.</span>
    Chain() *<a href="../../../core/index.html">core</a>.<a href="../../../core/index.html#BlockChain">BlockChain</a>

    <span class="comment">// RunPeer is invoked when a peer joins on the `eth` protocol. The handler</span>
    <span class="comment">// should do any peer maintenance work, handshakes and validations. If all</span>
    <span class="comment">// is passed, control should be given back to the `handler` to process the</span>
    <span class="comment">// inbound messages going forward.</span>
    RunPeer(peer *<a href="index.html#Peer">Peer</a>, handler <a href="index.html#Handler">Handler</a>) <a href="../../../../../../builtin/index.html#error">error</a>

    <span class="comment">// PeerInfo retrieves all known `snap` information about a peer.</span>
    PeerInfo(id <a href="../../../p2p/enode/index.html">enode</a>.<a href="../../../p2p/enode/index.html#ID">ID</a>) interface{}

    <span class="comment">// Handle is a callback to be invoked when a data packet is received from</span>
    <span class="comment">// the remote peer. Only packets not consumed by the protocol handler will</span>
    <span class="comment">// be forwarded to the backend.</span>
    Handle(peer *<a href="index.html#Peer">Peer</a>, packet <a href="index.html#Packet">Packet</a>) <a href="../../../../../../builtin/index.html#error">error</a>
}</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="ByteCodesPacket">type <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/protocol.go?s=6037:6176#L155">ByteCodesPacket</a>
				<a class="permalink" href="index.html#ByteCodesPacket">&#xb6;</a>
				
				
			</h2>
			<p>ByteCodesPacket represents a contract bytecode query response.

			<pre>type ByteCodesPacket struct {
<span id="ByteCodesPacket.ID"></span>    ID    <a href="../../../../../../builtin/index.html#uint64">uint64</a>   <span class="comment">// ID of the request this is a response for</span>
<span id="ByteCodesPacket.Codes"></span>    Codes [][]<a href="../../../../../../builtin/index.html#byte">byte</a> <span class="comment">// Requested contract bytecodes</span>
}
</pre>

			

			

			
			
			

			

			
				
				<h3 id="ByteCodesPacket.Kind">func (*ByteCodesPacket) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/protocol.go?s=8228:8263#L202">Kind</a>
					<a class="permalink" href="index.html#ByteCodesPacket.Kind">&#xb6;</a>
					
					
				</h3>
				<pre>func (*<a href="index.html#ByteCodesPacket">ByteCodesPacket</a>) Kind() <a href="../../../../../../builtin/index.html#byte">byte</a></pre>
				
				
				
				
			
				
				<h3 id="ByteCodesPacket.Name">func (*ByteCodesPacket) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/protocol.go?s=8167:8204#L201">Name</a>
					<a class="permalink" href="index.html#ByteCodesPacket.Name">&#xb6;</a>
					
					
				</h3>
				<pre>func (*<a href="index.html#ByteCodesPacket">ByteCodesPacket</a>) Name() <a href="../../../../../../builtin/index.html#string">string</a></pre>
				
				
				
				
			
		
			
			
			<h2 id="GetAccountRangePacket">type <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/protocol.go?s=2305:2652#L63">GetAccountRangePacket</a>
				<a class="permalink" href="index.html#GetAccountRangePacket">&#xb6;</a>
				
				
			</h2>
			<p>GetAccountRangePacket represents an account query.

			<pre>type GetAccountRangePacket struct {
<span id="GetAccountRangePacket.ID"></span>    ID     <a href="../../../../../../builtin/index.html#uint64">uint64</a>      <span class="comment">// Request ID to match up responses with</span>
<span id="GetAccountRangePacket.Root"></span>    Root   <a href="../../../common/index.html">common</a>.<a href="../../../common/index.html#Hash">Hash</a> <span class="comment">// Root hash of the account trie to serve</span>
<span id="GetAccountRangePacket.Origin"></span>    Origin <a href="../../../common/index.html">common</a>.<a href="../../../common/index.html#Hash">Hash</a> <span class="comment">// Hash of the first account to retrieve</span>
<span id="GetAccountRangePacket.Limit"></span>    Limit  <a href="../../../common/index.html">common</a>.<a href="../../../common/index.html#Hash">Hash</a> <span class="comment">// Hash of the last account to retrieve</span>
<span id="GetAccountRangePacket.Bytes"></span>    Bytes  <a href="../../../../../../builtin/index.html#uint64">uint64</a>      <span class="comment">// Soft limit at which to stop returning data</span>
}
</pre>

			

			

			
			
			

			

			
				
				<h3 id="GetAccountRangePacket.Kind">func (*GetAccountRangePacket) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/protocol.go?s=7528:7569#L187">Kind</a>
					<a class="permalink" href="index.html#GetAccountRangePacket.Kind">&#xb6;</a>
					
					
				</h3>
				<pre>func (*<a href="index.html#GetAccountRangePacket">GetAccountRangePacket</a>) Kind() <a href="../../../../../../builtin/index.html#byte">byte</a></pre>
				
				
				
				
			
				
				<h3 id="GetAccountRangePacket.Name">func (*GetAccountRangePacket) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/protocol.go?s=7455:7498#L186">Name</a>
					<a class="permalink" href="index.html#GetAccountRangePacket.Name">&#xb6;</a>
					
					
				</h3>
				<pre>func (*<a href="index.html#GetAccountRangePacket">GetAccountRangePacket</a>) Name() <a href="../../../../../../builtin/index.html#string">string</a></pre>
				
				
				
				
			
		
			
			
			<h2 id="GetByteCodesPacket">type <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/protocol.go?s=5742:5969#L148">GetByteCodesPacket</a>
				<a class="permalink" href="index.html#GetByteCodesPacket">&#xb6;</a>
				
				
			</h2>
			<p>GetByteCodesPacket represents a contract bytecode query.

			<pre>type GetByteCodesPacket struct {
<span id="GetByteCodesPacket.ID"></span>    ID     <a href="../../../../../../builtin/index.html#uint64">uint64</a>        <span class="comment">// Request ID to match up responses with</span>
<span id="GetByteCodesPacket.Hashes"></span>    Hashes []<a href="../../../common/index.html">common</a>.<a href="../../../common/index.html#Hash">Hash</a> <span class="comment">// Code hashes to retrieve the code for</span>
<span id="GetByteCodesPacket.Bytes"></span>    Bytes  <a href="../../../../../../builtin/index.html#uint64">uint64</a>        <span class="comment">// Soft limit at which to stop returning data</span>
}
</pre>

			

			

			
			
			

			

			
				
				<h3 id="GetByteCodesPacket.Kind">func (*GetByteCodesPacket) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/protocol.go?s=8098:8136#L199">Kind</a>
					<a class="permalink" href="index.html#GetByteCodesPacket.Kind">&#xb6;</a>
					
					
				</h3>
				<pre>func (*<a href="index.html#GetByteCodesPacket">GetByteCodesPacket</a>) Kind() <a href="../../../../../../builtin/index.html#byte">byte</a></pre>
				
				
				
				
			
				
				<h3 id="GetByteCodesPacket.Name">func (*GetByteCodesPacket) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/protocol.go?s=8031:8071#L198">Name</a>
					<a class="permalink" href="index.html#GetByteCodesPacket.Name">&#xb6;</a>
					
					
				</h3>
				<pre>func (*<a href="index.html#GetByteCodesPacket">GetByteCodesPacket</a>) Name() <a href="../../../../../../builtin/index.html#string">string</a></pre>
				
				
				
				
			
		
			
			
			<h2 id="GetStorageRangesPacket">type <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/protocol.go?s=4071:4565#L107">GetStorageRangesPacket</a>
				<a class="permalink" href="index.html#GetStorageRangesPacket">&#xb6;</a>
				
				
			</h2>
			<p>GetStorageRangesPacket represents an storage slot query.

			<pre>type GetStorageRangesPacket struct {
<span id="GetStorageRangesPacket.ID"></span>    ID       <a href="../../../../../../builtin/index.html#uint64">uint64</a>        <span class="comment">// Request ID to match up responses with</span>
<span id="GetStorageRangesPacket.Root"></span>    Root     <a href="../../../common/index.html">common</a>.<a href="../../../common/index.html#Hash">Hash</a>   <span class="comment">// Root hash of the account trie to serve</span>
<span id="GetStorageRangesPacket.Accounts"></span>    Accounts []<a href="../../../common/index.html">common</a>.<a href="../../../common/index.html#Hash">Hash</a> <span class="comment">// Account hashes of the storage tries to serve</span>
<span id="GetStorageRangesPacket.Origin"></span>    Origin   []<a href="../../../../../../builtin/index.html#byte">byte</a>        <span class="comment">// Hash of the first storage slot to retrieve (large contract mode)</span>
<span id="GetStorageRangesPacket.Limit"></span>    Limit    []<a href="../../../../../../builtin/index.html#byte">byte</a>        <span class="comment">// Hash of the last storage slot to retrieve (large contract mode)</span>
<span id="GetStorageRangesPacket.Bytes"></span>    Bytes    <a href="../../../../../../builtin/index.html#uint64">uint64</a>        <span class="comment">// Soft limit at which to stop returning data</span>
}
</pre>

			

			

			
			
			

			

			
				
				<h3 id="GetStorageRangesPacket.Kind">func (*GetStorageRangesPacket) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/protocol.go?s=7814:7856#L193">Kind</a>
					<a class="permalink" href="index.html#GetStorageRangesPacket.Kind">&#xb6;</a>
					
					
				</h3>
				<pre>func (*<a href="index.html#GetStorageRangesPacket">GetStorageRangesPacket</a>) Kind() <a href="../../../../../../builtin/index.html#byte">byte</a></pre>
				
				
				
				
			
				
				<h3 id="GetStorageRangesPacket.Name">func (*GetStorageRangesPacket) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/protocol.go?s=7739:7783#L192">Name</a>
					<a class="permalink" href="index.html#GetStorageRangesPacket.Name">&#xb6;</a>
					
					
				</h3>
				<pre>func (*<a href="index.html#GetStorageRangesPacket">GetStorageRangesPacket</a>) Name() <a href="../../../../../../builtin/index.html#string">string</a></pre>
				
				
				
				
			
		
			
			
			<h2 id="GetTrieNodesPacket">type <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/protocol.go?s=6236:6545#L161">GetTrieNodesPacket</a>
				<a class="permalink" href="index.html#GetTrieNodesPacket">&#xb6;</a>
				
				
			</h2>
			<p>GetTrieNodesPacket represents a state trie node query.

			<pre>type GetTrieNodesPacket struct {
<span id="GetTrieNodesPacket.ID"></span>    ID    <a href="../../../../../../builtin/index.html#uint64">uint64</a>            <span class="comment">// Request ID to match up responses with</span>
<span id="GetTrieNodesPacket.Root"></span>    Root  <a href="../../../common/index.html">common</a>.<a href="../../../common/index.html#Hash">Hash</a>       <span class="comment">// Root hash of the account trie to serve</span>
<span id="GetTrieNodesPacket.Paths"></span>    Paths []<a href="index.html#TrieNodePathSet">TrieNodePathSet</a> <span class="comment">// Trie node hashes to retrieve the nodes for</span>
<span id="GetTrieNodesPacket.Bytes"></span>    Bytes <a href="../../../../../../builtin/index.html#uint64">uint64</a>            <span class="comment">// Soft limit at which to stop returning data</span>
}
</pre>

			

			

			
			
			

			

			
				
				<h3 id="GetTrieNodesPacket.Kind">func (*GetTrieNodesPacket) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/protocol.go?s=8358:8396#L205">Kind</a>
					<a class="permalink" href="index.html#GetTrieNodesPacket.Kind">&#xb6;</a>
					
					
				</h3>
				<pre>func (*<a href="index.html#GetTrieNodesPacket">GetTrieNodesPacket</a>) Kind() <a href="../../../../../../builtin/index.html#byte">byte</a></pre>
				
				
				
				
			
				
				<h3 id="GetTrieNodesPacket.Name">func (*GetTrieNodesPacket) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/protocol.go?s=8291:8331#L204">Name</a>
					<a class="permalink" href="index.html#GetTrieNodesPacket.Name">&#xb6;</a>
					
					
				</h3>
				<pre>func (*<a href="index.html#GetTrieNodesPacket">GetTrieNodesPacket</a>) Name() <a href="../../../../../../builtin/index.html#string">string</a></pre>
				
				
				
				
			
		
			
			
			<h2 id="Handler">type <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/handler.go?s=2251:2286#L50">Handler</a>
				<a class="permalink" href="index.html#Handler">&#xb6;</a>
				
				
			</h2>
			<p>Handler is a callback to invoke from an outside runner after the boilerplate
exchanges have passed.

			<pre>type Handler func(peer *<a href="index.html#Peer">Peer</a>) <a href="../../../../../../builtin/index.html#error">error</a></pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="NodeInfo">type <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/handler.go?s=19137:19159#L552">NodeInfo</a>
				<a class="permalink" href="index.html#NodeInfo">&#xb6;</a>
				
				
			</h2>
			<p>NodeInfo represents a short summary of the `snap` sub-protocol metadata
known about the host peer.

			<pre>type NodeInfo struct{}
</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="Packet">type <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/protocol.go?s=2100:2249#L57">Packet</a>
				<a class="permalink" href="index.html#Packet">&#xb6;</a>
				
				
			</h2>
			<p>Packet represents a p2p message in the `snap` protocol.

			<pre>type Packet interface {
    Name() <a href="../../../../../../builtin/index.html#string">string</a> <span class="comment">// Name returns a string corresponding to the message type.</span>
    Kind() <a href="../../../../../../builtin/index.html#byte">byte</a>   <span class="comment">// Kind returns the message type.</span>
}</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="Peer">type <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/peer.go?s=1016:1333#L16">Peer</a>
				<a class="permalink" href="index.html#Peer">&#xb6;</a>
				
				
			</h2>
			<p>Peer is a collection of relevant information we have about a `snap` peer.

			<pre>type Peer struct {
    *<a href="../../../p2p/index.html">p2p</a>.<a href="../../../p2p/index.html#Peer">Peer</a> <span class="comment">// The embedded P2P package peer</span>
    <span class="comment">// contains filtered or unexported fields</span>
}
</pre>

			

			

			
			
			

			
				
				<h3 id="NewFakePeer">func <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/peer.go?s=1728:1797#L40">NewFakePeer</a>
					<a class="permalink" href="index.html#NewFakePeer">&#xb6;</a>
					
					
				</h3>
				<pre>func NewFakePeer(version <a href="../../../../../../builtin/index.html#uint">uint</a>, id <a href="../../../../../../builtin/index.html#string">string</a>, rw <a href="../../../p2p/index.html">p2p</a>.<a href="../../../p2p/index.html#MsgReadWriter">MsgReadWriter</a>) *<a href="index.html#Peer">Peer</a></pre>
				<p>NewFakePeer create a fake snap peer without a backing p2p peer, for testing purposes.

				
				
			
				
				<h3 id="NewPeer">func <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/peer.go?s=1425:1492#L28">NewPeer</a>
					<a class="permalink" href="index.html#NewPeer">&#xb6;</a>
					
					
				</h3>
				<pre>func NewPeer(version <a href="../../../../../../builtin/index.html#uint">uint</a>, p *<a href="../../../p2p/index.html">p2p</a>.<a href="../../../p2p/index.html#Peer">Peer</a>, rw <a href="../../../p2p/index.html">p2p</a>.<a href="../../../p2p/index.html#MsgReadWriter">MsgReadWriter</a>) *<a href="index.html#Peer">Peer</a></pre>
				<p>NewPeer create a wrapper for a network connection and negotiated  protocol
version.

				
				
			

			
				
				<h3 id="Peer.ID">func (*Peer) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/peer.go?s=1953:1979#L50">ID</a>
					<a class="permalink" href="index.html#Peer.ID">&#xb6;</a>
					
					
				</h3>
				<pre>func (p *<a href="index.html#Peer">Peer</a>) ID() <a href="../../../../../../builtin/index.html#string">string</a></pre>
				<p>ID retrieves the peer&apos;s unique identifier.

				
				
				
			
				
				<h3 id="Peer.Log">func (*Peer) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/peer.go?s=2201:2232#L60">Log</a>
					<a class="permalink" href="index.html#Peer.Log">&#xb6;</a>
					
					
				</h3>
				<pre>func (p *<a href="index.html#Peer">Peer</a>) Log() <a href="../../../log/index.html">log</a>.<a href="../../../log/index.html#Logger">Logger</a></pre>
				<p>Log overrides the P2P logger with the higher level one containing only the id.

				
				
				
			
				
				<h3 id="Peer.RequestAccountRange">func (*Peer) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/peer.go?s=2370:2480#L66">RequestAccountRange</a>
					<a class="permalink" href="index.html#Peer.RequestAccountRange">&#xb6;</a>
					
					
				</h3>
				<pre>func (p *<a href="index.html#Peer">Peer</a>) RequestAccountRange(id <a href="../../../../../../builtin/index.html#uint64">uint64</a>, root <a href="../../../common/index.html">common</a>.<a href="../../../common/index.html#Hash">Hash</a>, origin, limit <a href="../../../common/index.html">common</a>.<a href="../../../common/index.html#Hash">Hash</a>, bytes <a href="../../../../../../builtin/index.html#uint64">uint64</a>) <a href="../../../../../../builtin/index.html#error">error</a></pre>
				<p>RequestAccountRange fetches a batch of accounts rooted in a specific account
trie, starting with the origin.

				
				
				
			
				
				<h3 id="Peer.RequestByteCodes">func (*Peer) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/peer.go?s=3971:4055#L100">RequestByteCodes</a>
					<a class="permalink" href="index.html#Peer.RequestByteCodes">&#xb6;</a>
					
					
				</h3>
				<pre>func (p *<a href="index.html#Peer">Peer</a>) RequestByteCodes(id <a href="../../../../../../builtin/index.html#uint64">uint64</a>, hashes []<a href="../../../common/index.html">common</a>.<a href="../../../common/index.html#Hash">Hash</a>, bytes <a href="../../../../../../builtin/index.html#uint64">uint64</a>) <a href="../../../../../../builtin/index.html#error">error</a></pre>
				<p>RequestByteCodes fetches a batch of bytecodes by hash.

				
				
				
			
				
				<h3 id="Peer.RequestStorageRanges">func (*Peer) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/peer.go?s=3063:3193#L82">RequestStorageRanges</a>
					<a class="permalink" href="index.html#Peer.RequestStorageRanges">&#xb6;</a>
					
					
				</h3>
				<pre>func (p *<a href="index.html#Peer">Peer</a>) RequestStorageRanges(id <a href="../../../../../../builtin/index.html#uint64">uint64</a>, root <a href="../../../common/index.html">common</a>.<a href="../../../common/index.html#Hash">Hash</a>, accounts []<a href="../../../common/index.html">common</a>.<a href="../../../common/index.html#Hash">Hash</a>, origin, limit []<a href="../../../../../../builtin/index.html#byte">byte</a>, bytes <a href="../../../../../../builtin/index.html#uint64">uint64</a>) <a href="../../../../../../builtin/index.html#error">error</a></pre>
				<p>RequestStorageRange fetches a batch of storage slots belonging to one or more
accounts. If slots from only one account is requested, an origin marker may also
be used to retrieve from there.

				
				
				
			
				
				<h3 id="Peer.RequestTrieNodes">func (*Peer) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/peer.go?s=4473:4578#L113">RequestTrieNodes</a>
					<a class="permalink" href="index.html#Peer.RequestTrieNodes">&#xb6;</a>
					
					
				</h3>
				<pre>func (p *<a href="index.html#Peer">Peer</a>) RequestTrieNodes(id <a href="../../../../../../builtin/index.html#uint64">uint64</a>, root <a href="../../../common/index.html">common</a>.<a href="../../../common/index.html#Hash">Hash</a>, paths []<a href="index.html#TrieNodePathSet">TrieNodePathSet</a>, bytes <a href="../../../../../../builtin/index.html#uint64">uint64</a>) <a href="../../../../../../builtin/index.html#error">error</a></pre>
				<p>RequestTrieNodes fetches a batch of account or storage trie nodes rooted in
a specific state trie.

				
				
				
			
				
				<h3 id="Peer.Version">func (*Peer) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/peer.go?s=2066:2095#L55">Version</a>
					<a class="permalink" href="index.html#Peer.Version">&#xb6;</a>
					
					
				</h3>
				<pre>func (p *<a href="index.html#Peer">Peer</a>) Version() <a href="../../../../../../builtin/index.html#uint">uint</a></pre>
				<p>Version retrieves the peer&apos;s negotiated `snap` protocol version.

				
				
				
			
		
			
			
			<h2 id="StorageData">type <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/protocol.go?s=4982:5101#L124">StorageData</a>
				<a class="permalink" href="index.html#StorageData">&#xb6;</a>
				
				
			</h2>
			<p>StorageData represents a single storage slot in a query response.

			<pre>type StorageData struct {
<span id="StorageData.Hash"></span>    Hash <a href="../../../common/index.html">common</a>.<a href="../../../common/index.html#Hash">Hash</a> <span class="comment">// Hash of the storage slot</span>
<span id="StorageData.Body"></span>    Body []<a href="../../../../../../builtin/index.html#byte">byte</a>      <span class="comment">// Data content of the slot</span>
}
</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="StorageRangesPacket">type <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/protocol.go?s=4632:4911#L117">StorageRangesPacket</a>
				<a class="permalink" href="index.html#StorageRangesPacket">&#xb6;</a>
				
				
			</h2>
			<p>StorageRangesPacket represents a storage slot query response.

			<pre>type StorageRangesPacket struct {
<span id="StorageRangesPacket.ID"></span>    ID    <a href="../../../../../../builtin/index.html#uint64">uint64</a>           <span class="comment">// ID of the request this is a response for</span>
<span id="StorageRangesPacket.Slots"></span>    Slots [][]*<a href="index.html#StorageData">StorageData</a> <span class="comment">// Lists of consecutive storage slots for the requested accounts</span>
<span id="StorageRangesPacket.Proof"></span>    Proof [][]<a href="../../../../../../builtin/index.html#byte">byte</a>         <span class="comment">// Merkle proofs for the *last* slot range, if it&#39;s incomplete</span>
}
</pre>

			

			

			
			
			

			

			
				
				<h3 id="StorageRangesPacket.Kind">func (*StorageRangesPacket) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/protocol.go?s=7960:7999#L196">Kind</a>
					<a class="permalink" href="index.html#StorageRangesPacket.Kind">&#xb6;</a>
					
					
				</h3>
				<pre>func (*<a href="index.html#StorageRangesPacket">StorageRangesPacket</a>) Kind() <a href="../../../../../../builtin/index.html#byte">byte</a></pre>
				
				
				
				
			
				
				<h3 id="StorageRangesPacket.Name">func (*StorageRangesPacket) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/protocol.go?s=7891:7932#L195">Name</a>
					<a class="permalink" href="index.html#StorageRangesPacket.Name">&#xb6;</a>
					
					
				</h3>
				<pre>func (*<a href="index.html#StorageRangesPacket">StorageRangesPacket</a>) Name() <a href="../../../../../../builtin/index.html#string">string</a></pre>
				
				
				
				
			
				
				<h3 id="StorageRangesPacket.Unpack">func (*StorageRangesPacket) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/protocol.go?s=5264:5332#L131">Unpack</a>
					<a class="permalink" href="index.html#StorageRangesPacket.Unpack">&#xb6;</a>
					
					
				</h3>
				<pre>func (p *<a href="index.html#StorageRangesPacket">StorageRangesPacket</a>) Unpack() ([][]<a href="../../../common/index.html">common</a>.<a href="../../../common/index.html#Hash">Hash</a>, [][][]<a href="../../../../../../builtin/index.html#byte">byte</a>)</pre>
				<p>Unpack retrieves the storage slots from the range packet and returns them in
a split flat format that&apos;s more consistent with the internal data structures.

				
				
				
			
		
			
			
			<h2 id="SyncPeer">type <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/sync.go?s=17052:18066#L349">SyncPeer</a>
				<a class="permalink" href="index.html#SyncPeer">&#xb6;</a>
				
				
			</h2>
			<p>SyncPeer abstracts out the methods required for a peer to be synced against
with the goal of allowing the construction of mock peers without the full
blown networking.

			<pre>type SyncPeer interface {
    <span class="comment">// ID retrieves the peer&#39;s unique identifier.</span>
    ID() <a href="../../../../../../builtin/index.html#string">string</a>

    <span class="comment">// RequestAccountRange fetches a batch of accounts rooted in a specific account</span>
    <span class="comment">// trie, starting with the origin.</span>
    RequestAccountRange(id <a href="../../../../../../builtin/index.html#uint64">uint64</a>, root, origin, limit <a href="../../../common/index.html">common</a>.<a href="../../../common/index.html#Hash">Hash</a>, bytes <a href="../../../../../../builtin/index.html#uint64">uint64</a>) <a href="../../../../../../builtin/index.html#error">error</a>

    <span class="comment">// RequestStorageRanges fetches a batch of storage slots belonging to one or</span>
    <span class="comment">// more accounts. If slots from only one account is requested, an origin marker</span>
    <span class="comment">// may also be used to retrieve from there.</span>
    RequestStorageRanges(id <a href="../../../../../../builtin/index.html#uint64">uint64</a>, root <a href="../../../common/index.html">common</a>.<a href="../../../common/index.html#Hash">Hash</a>, accounts []<a href="../../../common/index.html">common</a>.<a href="../../../common/index.html#Hash">Hash</a>, origin, limit []<a href="../../../../../../builtin/index.html#byte">byte</a>, bytes <a href="../../../../../../builtin/index.html#uint64">uint64</a>) <a href="../../../../../../builtin/index.html#error">error</a>

    <span class="comment">// RequestByteCodes fetches a batch of bytecodes by hash.</span>
    RequestByteCodes(id <a href="../../../../../../builtin/index.html#uint64">uint64</a>, hashes []<a href="../../../common/index.html">common</a>.<a href="../../../common/index.html#Hash">Hash</a>, bytes <a href="../../../../../../builtin/index.html#uint64">uint64</a>) <a href="../../../../../../builtin/index.html#error">error</a>

    <span class="comment">// RequestTrieNodes fetches a batch of account or storage trie nodes rooted in</span>
    <span class="comment">// a specific state trie.</span>
    RequestTrieNodes(id <a href="../../../../../../builtin/index.html#uint64">uint64</a>, root <a href="../../../common/index.html">common</a>.<a href="../../../common/index.html#Hash">Hash</a>, paths []<a href="index.html#TrieNodePathSet">TrieNodePathSet</a>, bytes <a href="../../../../../../builtin/index.html#uint64">uint64</a>) <a href="../../../../../../builtin/index.html#error">error</a>

    <span class="comment">// Log retrieves the peer&#39;s own contextual logger.</span>
    Log() <a href="../../../log/index.html">log</a>.<a href="../../../log/index.html#Logger">Logger</a>
}</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="SyncPending">type <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/sync.go?s=16735:16873#L341">SyncPending</a>
				<a class="permalink" href="index.html#SyncPending">&#xb6;</a>
				
				
			</h2>
			<p>SyncPending is analogous to SyncProgress, but it&apos;s used to report on pending
ephemeral sync progress that doesn&apos;t get persisted into the database.

			<pre>type SyncPending struct {
<span id="SyncPending.TrienodeHeal"></span>    TrienodeHeal <a href="../../../../../../builtin/index.html#uint64">uint64</a> <span class="comment">// Number of state trie nodes pending</span>
<span id="SyncPending.BytecodeHeal"></span>    BytecodeHeal <a href="../../../../../../builtin/index.html#uint64">uint64</a> <span class="comment">// Number of bytecodes pending</span>
}
</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="SyncProgress">type <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/sync.go?s=15621:16580#L321">SyncProgress</a>
				<a class="permalink" href="index.html#SyncProgress">&#xb6;</a>
				
				
			</h2>
			<p>SyncProgress is a database entry to allow suspending and resuming a snapshot state
sync. Opposed to full and fast sync, there is no way to restart a suspended
snap sync without prior knowledge of the suspension point.

			<pre>type SyncProgress struct {
<span id="SyncProgress.Tasks"></span>    Tasks []*accountTask <span class="comment">// The suspended account tasks (contract tasks within)</span>

    <span class="comment">// Status report during syncing phase</span>
<span id="SyncProgress.AccountSynced"></span>    AccountSynced  <a href="../../../../../../builtin/index.html#uint64">uint64</a>             <span class="comment">// Number of accounts downloaded</span>
<span id="SyncProgress.AccountBytes"></span>    AccountBytes   <a href="../../../common/index.html">common</a>.<a href="../../../common/index.html#StorageSize">StorageSize</a> <span class="comment">// Number of account trie bytes persisted to disk</span>
<span id="SyncProgress.BytecodeSynced"></span>    BytecodeSynced <a href="../../../../../../builtin/index.html#uint64">uint64</a>             <span class="comment">// Number of bytecodes downloaded</span>
<span id="SyncProgress.BytecodeBytes"></span>    BytecodeBytes  <a href="../../../common/index.html">common</a>.<a href="../../../common/index.html#StorageSize">StorageSize</a> <span class="comment">// Number of bytecode bytes downloaded</span>
<span id="SyncProgress.StorageSynced"></span>    StorageSynced  <a href="../../../../../../builtin/index.html#uint64">uint64</a>             <span class="comment">// Number of storage slots downloaded</span>
<span id="SyncProgress.StorageBytes"></span>    StorageBytes   <a href="../../../common/index.html">common</a>.<a href="../../../common/index.html#StorageSize">StorageSize</a> <span class="comment">// Number of storage trie bytes persisted to disk</span>

    <span class="comment">// Status report during healing phase</span>
<span id="SyncProgress.TrienodeHealSynced"></span>    TrienodeHealSynced <a href="../../../../../../builtin/index.html#uint64">uint64</a>             <span class="comment">// Number of state trie nodes downloaded</span>
<span id="SyncProgress.TrienodeHealBytes"></span>    TrienodeHealBytes  <a href="../../../common/index.html">common</a>.<a href="../../../common/index.html#StorageSize">StorageSize</a> <span class="comment">// Number of state trie bytes persisted to disk</span>
<span id="SyncProgress.BytecodeHealSynced"></span>    BytecodeHealSynced <a href="../../../../../../builtin/index.html#uint64">uint64</a>             <span class="comment">// Number of bytecodes downloaded</span>
<span id="SyncProgress.BytecodeHealBytes"></span>    BytecodeHealBytes  <a href="../../../common/index.html">common</a>.<a href="../../../common/index.html#StorageSize">StorageSize</a> <span class="comment">// Number of bytecodes persisted to disk</span>
}
</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="Syncer">type <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/sync.go?s=18792:22534#L384">Syncer</a>
				<a class="permalink" href="index.html#Syncer">&#xb6;</a>
				
				
			</h2>
			<p>Syncer is an Ethereum account and storage trie syncer based on snapshots and
the  snap protocol. It&apos;s purpose is to download all the accounts and storage
slots from remote peers and reassemble chunks of the state trie, on top of
which a state sync can be run to fix any gaps / overlaps.
<p>Every network request has a variety of failure events:
<ul>
<li>The peer disconnects after task assignment, failing to send the request
<li>The peer disconnects after sending the request, before delivering on it
<li>The peer remains connected, but does not deliver a response in time
<li>The peer delivers a stale response after a previous timeout
<li>The peer delivers a refusal to serve the requested state
</ul>

			<pre>type Syncer struct {
    <span class="comment">// contains filtered or unexported fields</span>
}
</pre>

			

			

			
			
			

			
				
				<h3 id="NewSyncer">func <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/sync.go?s=22637:22683#L448">NewSyncer</a>
					<a class="permalink" href="index.html#NewSyncer">&#xb6;</a>
					
					
				</h3>
				<pre>func NewSyncer(db <a href="../../../ethdb/index.html">ethdb</a>.<a href="../../../ethdb/index.html#KeyValueStore">KeyValueStore</a>) *<a href="index.html#Syncer">Syncer</a></pre>
				<p>NewSyncer creates a new snapshot syncer to download the Ethereum state over the
snap protocol.

				
				
			

			
				
				<h3 id="Syncer.OnAccounts">func (*Syncer) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/sync.go?s=79007:79123#L2227">OnAccounts</a>
					<a class="permalink" href="index.html#Syncer.OnAccounts">&#xb6;</a>
					
					
				</h3>
				<pre>func (s *<a href="index.html#Syncer">Syncer</a>) OnAccounts(peer <a href="index.html#SyncPeer">SyncPeer</a>, id <a href="../../../../../../builtin/index.html#uint64">uint64</a>, hashes []<a href="../../../common/index.html">common</a>.<a href="../../../common/index.html#Hash">Hash</a>, accounts [][]<a href="../../../../../../builtin/index.html#byte">byte</a>, proof [][]<a href="../../../../../../builtin/index.html#byte">byte</a>) <a href="../../../../../../builtin/index.html#error">error</a></pre>
				<p>OnAccounts is a callback method to invoke when a range of accounts are
received from a remote peer.

				
				
				
			
				
				<h3 id="Syncer.OnByteCodes">func (*Syncer) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/sync.go?s=82294:82374#L2329">OnByteCodes</a>
					<a class="permalink" href="index.html#Syncer.OnByteCodes">&#xb6;</a>
					
					
				</h3>
				<pre>func (s *<a href="index.html#Syncer">Syncer</a>) OnByteCodes(peer <a href="index.html#SyncPeer">SyncPeer</a>, id <a href="../../../../../../builtin/index.html#uint64">uint64</a>, bytecodes [][]<a href="../../../../../../builtin/index.html#byte">byte</a>) <a href="../../../../../../builtin/index.html#error">error</a></pre>
				<p>OnByteCodes is a callback method to invoke when a batch of contract
bytes codes are received from a remote peer.

				
				
				
			
				
				<h3 id="Syncer.OnStorage">func (*Syncer) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/sync.go?s=85610:85726#L2436">OnStorage</a>
					<a class="permalink" href="index.html#Syncer.OnStorage">&#xb6;</a>
					
					
				</h3>
				<pre>func (s *<a href="index.html#Syncer">Syncer</a>) OnStorage(peer <a href="index.html#SyncPeer">SyncPeer</a>, id <a href="../../../../../../builtin/index.html#uint64">uint64</a>, hashes [][]<a href="../../../common/index.html">common</a>.<a href="../../../common/index.html#Hash">Hash</a>, slots [][][]<a href="../../../../../../builtin/index.html#byte">byte</a>, proof [][]<a href="../../../../../../builtin/index.html#byte">byte</a>) <a href="../../../../../../builtin/index.html#error">error</a></pre>
				<p>OnStorage is a callback method to invoke when ranges of storage slots
are received from a remote peer.

				
				
				
			
				
				<h3 id="Syncer.OnTrieNodes">func (*Syncer) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/sync.go?s=90292:90372#L2578">OnTrieNodes</a>
					<a class="permalink" href="index.html#Syncer.OnTrieNodes">&#xb6;</a>
					
					
				</h3>
				<pre>func (s *<a href="index.html#Syncer">Syncer</a>) OnTrieNodes(peer <a href="index.html#SyncPeer">SyncPeer</a>, id <a href="../../../../../../builtin/index.html#uint64">uint64</a>, trienodes [][]<a href="../../../../../../builtin/index.html#byte">byte</a>) <a href="../../../../../../builtin/index.html#error">error</a></pre>
				<p>OnTrieNodes is a callback method to invoke when a batch of trie nodes
are received from a remote peer.

				
				
				
			
				
				<h3 id="Syncer.Progress">func (*Syncer) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/sync.go?s=34718:34775#L814">Progress</a>
					<a class="permalink" href="index.html#Syncer.Progress">&#xb6;</a>
					
					
				</h3>
				<pre>func (s *<a href="index.html#Syncer">Syncer</a>) Progress() (*<a href="index.html#SyncProgress">SyncProgress</a>, *<a href="index.html#SyncPending">SyncPending</a>)</pre>
				<p>Progress returns the snap sync status statistics.

				
				
				
			
				
				<h3 id="Syncer.Register">func (*Syncer) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/sync.go?s=23553:23599#L478">Register</a>
					<a class="permalink" href="index.html#Syncer.Register">&#xb6;</a>
					
					
				</h3>
				<pre>func (s *<a href="index.html#Syncer">Syncer</a>) Register(peer <a href="index.html#SyncPeer">SyncPeer</a>) <a href="../../../../../../builtin/index.html#error">error</a></pre>
				<p>Register injects a new data source into the syncer&apos;s peerset.

				
				
				
			
				
				<h3 id="Syncer.Sync">func (*Syncer) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/sync.go?s=25330:25397#L537">Sync</a>
					<a class="permalink" href="index.html#Syncer.Sync">&#xb6;</a>
					
					
				</h3>
				<pre>func (s *<a href="index.html#Syncer">Syncer</a>) Sync(root <a href="../../../common/index.html">common</a>.<a href="../../../common/index.html#Hash">Hash</a>, cancel chan struct{}) <a href="../../../../../../builtin/index.html#error">error</a></pre>
				<p>Sync starts (or resumes a previous) sync cycle to iterate over a state trie
with the given root and reconstruct the nodes based on the snapshot leaves.
Previously downloaded segments will not be redownloaded of fixed, rather any
errors will be healed after the leaves are fully accumulated.

				
				
				
			
				
				<h3 id="Syncer.Unregister">func (*Syncer) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/sync.go?s=24363:24407#L506">Unregister</a>
					<a class="permalink" href="index.html#Syncer.Unregister">&#xb6;</a>
					
					
				</h3>
				<pre>func (s *<a href="index.html#Syncer">Syncer</a>) Unregister(id <a href="../../../../../../builtin/index.html#string">string</a>) <a href="../../../../../../builtin/index.html#error">error</a></pre>
				<p>Unregister injects a new data source into the syncer&apos;s peerset.

				
				
				
			
		
			
			
			<h2 id="TrieNodePathSet">type <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/protocol.go?s=7221:7250#L178">TrieNodePathSet</a>
				<a class="permalink" href="index.html#TrieNodePathSet">&#xb6;</a>
				
				
			</h2>
			<p>TrieNodePathSet is a list of trie node paths to retrieve. A naive way to
represent trie nodes would be a simple list of `account || storage` path
segments concatenated, but that would be very wasteful on the network.
<p>Instead, this array special cases the first element as the path in the
account trie and the remaining elements as paths in the storage trie. To
address an account node, the slice should have a length of 1 consisting
of only the account path. There&apos;s no need to be able to address both an
account node and a storage node in the same request as it cannot happen
that a slot is accessed before the account path is fully expanded.

			<pre>type TrieNodePathSet [][]<a href="../../../../../../builtin/index.html#byte">byte</a></pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="TrieNodesPacket">type <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/protocol.go?s=7316:7453#L181">TrieNodesPacket</a>
				<a class="permalink" href="index.html#TrieNodesPacket">&#xb6;</a>
				
				
			</h2>
			<p>TrieNodesPacket represents a state trie node query response.

			<pre>type TrieNodesPacket struct {
<span id="TrieNodesPacket.ID"></span>    ID    <a href="../../../../../../builtin/index.html#uint64">uint64</a>   <span class="comment">// ID of the request this is a response for</span>
<span id="TrieNodesPacket.Nodes"></span>    Nodes [][]<a href="../../../../../../builtin/index.html#byte">byte</a> <span class="comment">// Requested state trie nodes</span>
}
</pre>

			

			

			
			
			

			

			
				
				<h3 id="TrieNodesPacket.Kind">func (*TrieNodesPacket) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/protocol.go?s=8488:8523#L208">Kind</a>
					<a class="permalink" href="index.html#TrieNodesPacket.Kind">&#xb6;</a>
					
					
				</h3>
				<pre>func (*<a href="index.html#TrieNodesPacket">TrieNodesPacket</a>) Kind() <a href="../../../../../../builtin/index.html#byte">byte</a></pre>
				
				
				
				
			
				
				<h3 id="TrieNodesPacket.Name">func (*TrieNodesPacket) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/eth/protocols/snap/protocol.go?s=8427:8464#L207">Name</a>
					<a class="permalink" href="index.html#TrieNodesPacket.Name">&#xb6;</a>
					
					
				</h3>
				<pre>func (*<a href="index.html#TrieNodesPacket">TrieNodesPacket</a>) Name() <a href="../../../../../../builtin/index.html#string">string</a></pre>
				
				
				
				
			
		
	

	







<div id="footer">
Build version go1.19.10.<br>
Except as <a href="https://developers.google.com/site-policies#restrictions">noted</a>,
the content of this page is licensed under the
Creative Commons Attribution 3.0 License,
and code is licensed under a <a href="http://localhost:6060/LICENSE">BSD license</a>.<br>
<a href="https://golang.org/doc/tos.html">Terms of Service</a> |
<a href="https://www.google.com/intl/en/policies/privacy/">Privacy Policy</a>
</div>

</div><!-- .container -->
</div><!-- #page -->
</body>
</html>
