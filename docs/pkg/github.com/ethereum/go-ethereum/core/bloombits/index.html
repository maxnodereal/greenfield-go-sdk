<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#375EAB">

  <title>bloombits - Go Documentation Server</title>

<link type="text/css" rel="stylesheet" href="../../../../../../lib/godoc/style.css">

<script>window.initFuncs = [];</script>
<script src="../../../../../../lib/godoc/jquery.js" defer></script>



<script>var goVersion = "go1.19.10";</script>
<script src="../../../../../../lib/godoc/godocs.js" defer></script>
</head>
<body>

<div id='lowframe' style="position: fixed; bottom: 0; left: 0; height: 0; width: 100%; border-top: thin solid grey; background-color: white; overflow: auto;">
...
</div><!-- #lowframe -->

<div id="topbar" class="wide"><div class="container">
<div class="top-heading" id="heading-wide"><a href="http://localhost:6060/pkg/">Go Documentation Server</a></div>
<div class="top-heading" id="heading-narrow"><a href="http://localhost:6060/pkg/">GoDoc</a></div>
<a href="index.html#" id="menu-button"><span id="menu-button-arrow">&#9661;</span></a>
<form method="GET" action="http://localhost:6060/search">
<div id="menu">

<span class="search-box"><input type="search" id="search" name="q" placeholder="Search" aria-label="Search" required><button type="submit"><span><!-- magnifying glass: --><svg width="24" height="24" viewBox="0 0 24 24"><title>submit search</title><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/><path d="M0 0h24v24H0z" fill="none"/></svg></span></button></span>
</div>
</form>

</div></div>



<div id="page" class="wide">
<div class="container">


  <h1>
    Package bloombits
    <span class="text-muted"></span>
  </h1>







<div id="nav"></div>


<!--
	Copyright 2009 The Go Authors. All rights reserved.
	Use of this source code is governed by a BSD-style
	license that can be found in the LICENSE file.
-->
<!--
	Note: Static (i.e., not template-generated) href and id
	attributes start with "pkg-" to make it impossible for
	them to conflict with generated attributes (some of which
	correspond to Go identifiers).
-->

	<script>
	document.ANALYSIS_DATA = null;
	document.CALLGRAPH = null;
	</script>

	
		
		<div id="short-nav">
			<dl>
			<dd><code>import "github.com/ethereum/go-ethereum/core/bloombits"</code></dd>
			</dl>
			<dl>
			<dd><a href="index.html#pkg-overview" class="overviewLink">Overview</a></dd>
			<dd><a href="index.html#pkg-index" class="indexLink">Index</a></dd>
			
			
			</dl>
		</div>
		<!-- The package's Name is printed as title by the top-level template -->
		<div id="pkg-overview" class="toggleVisible">
			<div class="collapsed">
				<h2 class="toggleButton" title="Click to show Overview section">Overview ▹</h2>
			</div>
			<div class="expanded">
				<h2 class="toggleButton" title="Click to hide Overview section">Overview ▾</h2>
				<p>Package bloombits implements bloom filtering on batches of data.

				
			</div>
		</div>

		<div id="pkg-index" class="toggleVisible">
		<div class="collapsed">
			<h2 class="toggleButton" title="Click to show Index section">Index ▹</h2>
		</div>
		<div class="expanded">
			<h2 class="toggleButton" title="Click to hide Index section">Index ▾</h2>

		<!-- Table of contents for API; must be named manual-nav to turn off auto nav. -->
			<div id="manual-nav">
			<dl>
			
			
			
			
				
				<dd><a href="index.html#Generator">type Generator</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#NewGenerator">func NewGenerator(sections uint) (*Generator, error)</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#Generator.AddBloom">func (b *Generator) AddBloom(index uint, bloom types.Bloom) error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#Generator.Bitset">func (b *Generator) Bitset(idx uint) ([]byte, error)</a></dd>
				
			
				
				<dd><a href="index.html#Matcher">type Matcher</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#NewMatcher">func NewMatcher(sectionSize uint64, filters [][][]byte) *Matcher</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#Matcher.Start">func (m *Matcher) Start(ctx context.Context, begin, end uint64, results chan uint64) (*MatcherSession, error)</a></dd>
				
			
				
				<dd><a href="index.html#MatcherSession">type MatcherSession</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#MatcherSession.Close">func (s *MatcherSession) Close()</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#MatcherSession.Error">func (s *MatcherSession) Error() error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#MatcherSession.Multiplex">func (s *MatcherSession) Multiplex(batch int, wait time.Duration, mux chan chan *Retrieval)</a></dd>
				
			
				
				<dd><a href="index.html#Retrieval">type Retrieval</a></dd>
				
				
			
			
			</dl>
			</div><!-- #manual-nav -->

		

		
			<h3>Package files</h3>
			<p>
			<span style="font-size:90%">
			
				<a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/core/bloombits/doc.go">doc.go</a>
			
				<a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/core/bloombits/generator.go">generator.go</a>
			
				<a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/core/bloombits/matcher.go">matcher.go</a>
			
				<a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/core/bloombits/scheduler.go">scheduler.go</a>
			
			</span>
			</p>
		
		</div><!-- .expanded -->
		</div><!-- #pkg-index -->

		

		
		
		
		
			
			
			<h2 id="Generator">type <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/core/bloombits/generator.go?s=1413:1677#L27">Generator</a>
				<a class="permalink" href="index.html#Generator">&#xb6;</a>
				
				
			</h2>
			<p>Generator takes a number of bloom filters and generates the rotated bloom bits
to be used for batched filtering.

			<pre>type Generator struct {
    <span class="comment">// contains filtered or unexported fields</span>
}
</pre>

			

			

			
			
			

			
				
				<h3 id="NewGenerator">func <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/core/bloombits/generator.go?s=1789:1841#L35">NewGenerator</a>
					<a class="permalink" href="index.html#NewGenerator">&#xb6;</a>
					
					
				</h3>
				<pre>func NewGenerator(sections <a href="../../../../../builtin/index.html#uint">uint</a>) (*<a href="index.html#Generator">Generator</a>, <a href="../../../../../builtin/index.html#error">error</a>)</pre>
				<p>NewGenerator creates a rotated bloom generator that can iteratively fill a
batched bloom filter&apos;s bits.

				
				
			

			
				
				<h3 id="Generator.AddBloom">func (*Generator) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/core/bloombits/generator.go?s=2177:2242#L48">AddBloom</a>
					<a class="permalink" href="index.html#Generator.AddBloom">&#xb6;</a>
					
					
				</h3>
				<pre>func (b *<a href="index.html#Generator">Generator</a>) AddBloom(index <a href="../../../../../builtin/index.html#uint">uint</a>, bloom <a href="../types/index.html">types</a>.<a href="../types/index.html#Bloom">Bloom</a>) <a href="../../../../../builtin/index.html#error">error</a></pre>
				<p>AddBloom takes a single bloom filter and sets the corresponding bit column
in memory accordingly.

				
				
				
			
				
				<h3 id="Generator.Bitset">func (*Generator) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/core/bloombits/generator.go?s=3405:3457#L80">Bitset</a>
					<a class="permalink" href="index.html#Generator.Bitset">&#xb6;</a>
					
					
				</h3>
				<pre>func (b *<a href="index.html#Generator">Generator</a>) Bitset(idx <a href="../../../../../builtin/index.html#uint">uint</a>) ([]<a href="../../../../../builtin/index.html#byte">byte</a>, <a href="../../../../../builtin/index.html#error">error</a>)</pre>
				<p>Bitset returns the bit vector belonging to the given bit index after all
blooms have been added.

				
				
				
			
		
			
			
			<h2 id="Matcher">type <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/core/bloombits/matcher.go?s=2469:3117#L65">Matcher</a>
				<a class="permalink" href="index.html#Matcher">&#xb6;</a>
				
				
			</h2>
			<p>Matcher is a pipelined system of schedulers and logic matchers which perform
binary AND/OR operations on the bit-streams, creating a stream of potential
blocks to inspect for data content.

			<pre>type Matcher struct {
    <span class="comment">// contains filtered or unexported fields</span>
}
</pre>

			

			

			
			
			

			
				
				<h3 id="NewMatcher">func <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/core/bloombits/matcher.go?s=3354:3418#L82">NewMatcher</a>
					<a class="permalink" href="index.html#NewMatcher">&#xb6;</a>
					
					
				</h3>
				<pre>func NewMatcher(sectionSize <a href="../../../../../builtin/index.html#uint64">uint64</a>, filters [][][]<a href="../../../../../builtin/index.html#byte">byte</a>) *<a href="index.html#Matcher">Matcher</a></pre>
				<p>NewMatcher creates a new pipeline for retrieving bloom bit streams and doing
address and topic filtering on them. Setting a filter component to `nil` is
allowed and will result in that filter rule being skipped (OR 0x11...1).

				
				
			

			
				
				<h3 id="Matcher.Start">func (*Matcher) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/core/bloombits/matcher.go?s=5041:5150#L137">Start</a>
					<a class="permalink" href="index.html#Matcher.Start">&#xb6;</a>
					
					
				</h3>
				<pre>func (m *<a href="index.html#Matcher">Matcher</a>) Start(ctx <a href="../../../../../context/index.html">context</a>.<a href="../../../../../context/index.html#Context">Context</a>, begin, end <a href="../../../../../builtin/index.html#uint64">uint64</a>, results chan <a href="../../../../../builtin/index.html#uint64">uint64</a>) (*<a href="index.html#MatcherSession">MatcherSession</a>, <a href="../../../../../builtin/index.html#error">error</a>)</pre>
				<p>Start starts the matching process and returns a stream of bloom matches in
a given range of blocks. If there are no more matches in the range, the result
channel is closed.

				
				
				
			
		
			
			
			<h2 id="MatcherSession">type <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/core/bloombits/matcher.go?s=15912:16312#L497">MatcherSession</a>
				<a class="permalink" href="index.html#MatcherSession">&#xb6;</a>
				
				
			</h2>
			<p>MatcherSession is returned by a started matcher to be used as a terminator
for the actively running matching operation.

			<pre>type MatcherSession struct {
    <span class="comment">// contains filtered or unexported fields</span>
}
</pre>

			

			

			
			
			

			

			
				
				<h3 id="MatcherSession.Close">func (*MatcherSession) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/core/bloombits/matcher.go?s=16537:16569#L513">Close</a>
					<a class="permalink" href="index.html#MatcherSession.Close">&#xb6;</a>
					
					
				</h3>
				<pre>func (s *<a href="index.html#MatcherSession">MatcherSession</a>) Close()</pre>
				<p>Close stops the matching process and waits for all subprocesses to terminate
before returning. The timeout may be used for graceful shutdown, allowing the
currently running retrievals to complete before this time.

				
				
				
			
				
				<h3 id="MatcherSession.Error">func (*MatcherSession) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/core/bloombits/matcher.go?s=16768:16806#L522">Error</a>
					<a class="permalink" href="index.html#MatcherSession.Error">&#xb6;</a>
					
					
				</h3>
				<pre>func (s *<a href="index.html#MatcherSession">MatcherSession</a>) Error() <a href="../../../../../builtin/index.html#error">error</a></pre>
				<p>Error returns any failure encountered during the matching session.

				
				
				
			
				
				<h3 id="MatcherSession.Multiplex">func (*MatcherSession) <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/core/bloombits/matcher.go?s=18732:18823#L588">Multiplex</a>
					<a class="permalink" href="index.html#MatcherSession.Multiplex">&#xb6;</a>
					
					
				</h3>
				<pre>func (s *<a href="index.html#MatcherSession">MatcherSession</a>) Multiplex(batch <a href="../../../../../builtin/index.html#int">int</a>, wait <a href="../../../../../time/index.html">time</a>.<a href="../../../../../time/index.html#Duration">Duration</a>, mux chan chan *<a href="index.html#Retrieval">Retrieval</a>)</pre>
				<p>Multiplex polls the matcher session for retrieval tasks and multiplexes it into
the requested retrieval queue to be serviced together with other sessions.
<p>This method will block for the lifetime of the session. Even after termination
of the session, any request in-flight need to be responded to! Empty responses
are fine though in that case.

				
				
				
			
		
			
			
			<h2 id="Retrieval">type <a href="http://localhost:6060/src/github.com/ethereum/go-ethereum/core/bloombits/matcher.go?s=2150:2269#L53">Retrieval</a>
				<a class="permalink" href="index.html#Retrieval">&#xb6;</a>
				
				
			</h2>
			<p>Retrieval represents a request for retrieval task assignments for a given
bit with the given number of fetch elements, or a response for such a request.
It can also have the actual results set to be used as a delivery data struct.
<p>The contest and error fields are used by the light client to terminate matching
early if an error is encountered on some path of the pipeline.

			<pre>type Retrieval struct {
<span id="Retrieval.Bit"></span>    Bit      <a href="../../../../../builtin/index.html#uint">uint</a>
<span id="Retrieval.Sections"></span>    Sections []<a href="../../../../../builtin/index.html#uint64">uint64</a>
<span id="Retrieval.Bitsets"></span>    Bitsets  [][]<a href="../../../../../builtin/index.html#byte">byte</a>

<span id="Retrieval.Context"></span>    Context <a href="../../../../../context/index.html">context</a>.<a href="../../../../../context/index.html#Context">Context</a>
<span id="Retrieval.Error"></span>    Error   <a href="../../../../../builtin/index.html#error">error</a>
}
</pre>

			

			

			
			
			

			

			
		
	

	







<div id="footer">
Build version go1.19.10.<br>
Except as <a href="https://developers.google.com/site-policies#restrictions">noted</a>,
the content of this page is licensed under the
Creative Commons Attribution 3.0 License,
and code is licensed under a <a href="http://localhost:6060/LICENSE">BSD license</a>.<br>
<a href="https://golang.org/doc/tos.html">Terms of Service</a> |
<a href="https://www.google.com/intl/en/policies/privacy/">Privacy Policy</a>
</div>

</div><!-- .container -->
</div><!-- #page -->
</body>
</html>
