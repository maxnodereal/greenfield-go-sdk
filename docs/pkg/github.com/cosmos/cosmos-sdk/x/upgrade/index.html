<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#375EAB">

  <title>upgrade - Go Documentation Server</title>

<link type="text/css" rel="stylesheet" href="../../../../../../lib/godoc/style.css">

<script>window.initFuncs = [];</script>
<script src="../../../../../../lib/godoc/jquery.js" defer></script>



<script>var goVersion = "go1.19.10";</script>
<script src="../../../../../../lib/godoc/godocs.js" defer></script>
</head>
<body>

<div id='lowframe' style="position: fixed; bottom: 0; left: 0; height: 0; width: 100%; border-top: thin solid grey; background-color: white; overflow: auto;">
...
</div><!-- #lowframe -->

<div id="topbar" class="wide"><div class="container">
<div class="top-heading" id="heading-wide"><a href="http://localhost:6060/pkg/">Go Documentation Server</a></div>
<div class="top-heading" id="heading-narrow"><a href="http://localhost:6060/pkg/">GoDoc</a></div>
<a href="index.html#" id="menu-button"><span id="menu-button-arrow">&#9661;</span></a>
<form method="GET" action="http://localhost:6060/search">
<div id="menu">

<span class="search-box"><input type="search" id="search" name="q" placeholder="Search" aria-label="Search" required><button type="submit"><span><!-- magnifying glass: --><svg width="24" height="24" viewBox="0 0 24 24"><title>submit search</title><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/><path d="M0 0h24v24H0z" fill="none"/></svg></span></button></span>
</div>
</form>

</div></div>



<div id="page" class="wide">
<div class="container">


  <h1>
    Package upgrade
    <span class="text-muted"></span>
  </h1>







<div id="nav"></div>


<!--
	Copyright 2009 The Go Authors. All rights reserved.
	Use of this source code is governed by a BSD-style
	license that can be found in the LICENSE file.
-->
<!--
	Note: Static (i.e., not template-generated) href and id
	attributes start with "pkg-" to make it impossible for
	them to conflict with generated attributes (some of which
	correspond to Go identifiers).
-->

	<script>
	document.ANALYSIS_DATA = null;
	document.CALLGRAPH = null;
	</script>

	
		
		<div id="short-nav">
			<dl>
			<dd><code>import "github.com/cosmos/cosmos-sdk/x/upgrade"</code></dd>
			</dl>
			<dl>
			<dd><a href="index.html#pkg-overview" class="overviewLink">Overview</a></dd>
			<dd><a href="index.html#pkg-index" class="indexLink">Index</a></dd>
			
			
				<dd><a href="index.html#pkg-subdirectories">Subdirectories</a></dd>
			
			</dl>
		</div>
		<!-- The package's Name is printed as title by the top-level template -->
		<div id="pkg-overview" class="toggleVisible">
			<div class="collapsed">
				<h2 class="toggleButton" title="Click to show Overview section">Overview ▹</h2>
			</div>
			<div class="expanded">
				<h2 class="toggleButton" title="Click to hide Overview section">Overview ▾</h2>
				<p>Package upgrade provides a Cosmos SDK module that can be used for smoothly upgrading a live Cosmos chain to a
new software version. It accomplishes this by providing a BeginBlocker hook that prevents the blockchain state
machine from proceeding once a pre-defined upgrade block height has been reached. The module does not prescribe
anything regarding how governance decides to do an upgrade, but just the mechanism for coordinating the upgrade safely.
Without software support for upgrades, upgrading a live chain is risky because all of the validators need to pause
their state machines at exactly the same point in the process. If this is not done correctly, there can be state
inconsistencies which are hard to recover from.
<h3 id="hdr-General_Workflow">General Workflow</h3>
<p>Let&apos;s assume we are running v0.38.0 of our software in our testnet and want to upgrade to v0.40.0.
How would this look in practice? First of all, we want to finalize the v0.40.0 release candidate
and there install a specially named upgrade handler (eg. &quot;testnet-v2&quot; or even &quot;v0.40.0&quot;). An upgrade
handler should be defined in a new version of the software to define what migrations
to run to migrate from the older version of the software. Naturally, this is app-specific rather
than module specific, and  must be defined in `app.go`, even if it imports logic from various
modules to perform the actions. You can register them with `upgradeKeeper.SetUpgradeHandler`
during the app initialization (before starting the abci server), and they serve not only to
perform a migration, but also to identify if this is the old or new version (eg. presence of
a handler registered for the named upgrade).
<p>Once the release candidate along with an appropriate upgrade handler is frozen,
we can have a governance vote to approve this upgrade at some future block height (e.g. 200000).
This is known as an upgrade.Plan. The v0.38.0 code will not know of this handler, but will
continue to run until block 200000, when the plan kicks in at BeginBlock. It will check
for existence of the handler, and finding it missing, know that it is running the obsolete software,
and gracefully exit.
<p>Generally the application binary will restart on exit, but then will execute this BeginBlocker
again and exit, causing a restart loop. Either the operator can manually install the new software,
or you can make use of an external watcher daemon to possibly download and then switch binaries,
also potentially doing a backup. An example of such a daemon is <a href="https://github.com/cosmos/cosmos-sdk/tree/main/cosmovisor">https://github.com/cosmos/cosmos-sdk/tree/main/cosmovisor</a>
described below under &quot;Automation&quot;.
<p>When the binary restarts with the upgraded version (here v0.40.0), it will detect we have registered the
&quot;testnet-v2&quot; upgrade handler in the code, and realize it is the new version. It then will run the upgrade handler
and *migrate the database in-place*. Once finished, it marks the upgrade as done, and continues processing
the rest of the block as normal. Once 2/3 of the voting power has upgraded, the blockchain will immediately
resume the consensus mechanism. If the majority of operators add a custom `do-upgrade` script, this should
be a matter of minutes and not even require them to be awake at that time.
<h3 id="hdr-Integrating_With_An_App">Integrating With An App</h3>
<p>Setup an upgrade Keeper for the app and then define a BeginBlocker that calls the upgrade
keeper&apos;s BeginBlocker method:
<pre>func (app *myApp) BeginBlocker(ctx sdk.Context, req abci.RequestBeginBlock) abci.ResponseBeginBlock {
	app.upgradeKeeper.BeginBlocker(ctx, req)
	return abci.ResponseBeginBlock{}
}
</pre>
<p>The app must then integrate the upgrade keeper with its governance module as appropriate. The governance module
should call ScheduleUpgrade to schedule an upgrade and ClearUpgradePlan to cancel a pending upgrade.
<h3 id="hdr-Performing_Upgrades">Performing Upgrades</h3>
<p>Upgrades can be scheduled at a predefined block height. Once this block height is reached, the
existing software will cease to process ABCI messages and a new version with code that handles the upgrade must be deployed.
All upgrades are coordinated by a unique upgrade name that cannot be reused on the same blockchain. In order for the upgrade
module to know that the upgrade has been safely applied, a handler with the name of the upgrade must be installed.
Here is an example handler for an upgrade named &quot;my-fancy-upgrade&quot;:
<pre>app.upgradeKeeper.SetUpgradeHandler(&quot;my-fancy-upgrade&quot;, func(ctx sdk.Context, plan upgrade.Plan) {
	// Perform any migrations of the state store needed for this upgrade
})
</pre>
<p>This upgrade handler performs the dual function of alerting the upgrade module that the named upgrade has been applied,
as well as providing the opportunity for the upgraded software to perform any necessary state migrations. Both the halt
(with the old binary) and applying the migration (with the new binary) are enforced in the state machine. Actually
switching the binaries is an ops task and not handled inside the sdk / abci app.
<p>Here is a sample code to set store migrations with an upgrade:
<pre>// this configures a no-op upgrade handler for the &quot;my-fancy-upgrade&quot; upgrade
app.UpgradeKeeper.SetUpgradeHandler(&quot;my-fancy-upgrade&quot;,  func(ctx sdk.Context, plan upgrade.Plan) {
	// upgrade changes here
})

upgradeInfo, err := app.UpgradeKeeper.ReadUpgradeInfoFromDisk()
if err != nil {
	// handle error
}

if upgradeInfo.Name == &quot;my-fancy-upgrade&quot; &amp;&amp; !app.UpgradeKeeper.IsSkipHeight(upgradeInfo.Height) {
	storeUpgrades := store.StoreUpgrades{
		Renamed: []store.StoreRename{{
			OldKey: &quot;foo&quot;,
			NewKey: &quot;bar&quot;,
		}},
		Deleted: []string{},
	}

	// configure store loader that checks if version == upgradeHeight and applies store upgrades
	app.SetStoreLoader(upgrade.UpgradeStoreLoader(upgradeInfo.Height, &amp;storeUpgrades))
}
</pre>
<h3 id="hdr-Halt_Behavior">Halt Behavior</h3>
<p>Before halting the ABCI state machine in the BeginBlocker method, the upgrade module will log an error
that looks like:
<pre>UPGRADE &quot;&lt;Name&gt;&quot; NEEDED at height &lt;NNNN&gt;: &lt;Info&gt;
</pre>
<p>where Name are Info are the values of the respective fields on the upgrade Plan.
<p>To perform the actual halt of the blockchain, the upgrade keeper simply panics which prevents the ABCI state machine
from proceeding but doesn&apos;t actually exit the process. Exiting the process can cause issues for other nodes that start
to lose connectivity with the exiting nodes, thus this module prefers to just halt but not exit.
<h3 id="hdr-Automation_and_Plan_Info">Automation and Plan.Info</h3>
<p>We have deprecated calling out to scripts, instead with propose <a href="https://github.com/cosmos/cosmos-sdk/tree/main/cosmovisor">https://github.com/cosmos/cosmos-sdk/tree/main/cosmovisor</a>
as a model for a watcher daemon that can launch simd as a subprocess and then read the upgrade log message
to swap binaries as needed. You can pass in information into Plan.Info according to the format
specified here <a href="https://github.com/cosmos/cosmos-sdk/tree/main/cosmovisor/README.md#auto-download">https://github.com/cosmos/cosmos-sdk/tree/main/cosmovisor/README.md#auto-download</a> .
This will allow a properly configured cosmsod daemon to auto-download new binaries and auto-upgrade.
As noted there, this is intended more for full nodes than validators.
<h3 id="hdr-Cancelling_Upgrades">Cancelling Upgrades</h3>
<p>There are two ways to cancel a planned upgrade - with on-chain governance or off-chain social consensus.
For the first one, there is a CancelSoftwareUpgrade proposal type, which can be voted on and will
remove the scheduled upgrade plan. Of course this requires that the upgrade was known to be a bad idea
well before the upgrade itself, to allow time for a vote. If you want to allow such a possibility, you
should set the upgrade height to be 2 * (votingperiod + depositperiod) + (safety delta) from the beginning of
the first upgrade proposal. Safety delta is the time available from the success of an upgrade proposal
and the realization it was a bad idea (due to external testing). You can also start a CancelSoftwareUpgrade
proposal while the original SoftwareUpgrade proposal is still being voted upon, as long as the voting
period ends after the SoftwareUpgrade proposal.
<p>However, let&apos;s assume that we don&apos;t realize the upgrade has a bug until shortly before it will occur
(or while we try it out - hitting some panic in the migration). It would seem the blockchain is stuck,
but we need to allow an escape for social consensus to overrule the planned upgrade. To do so, there&apos;s
a --unsafe-skip-upgrades flag to the start command, which will cause the node to mark the upgrade
as done upon hitting the planned upgrade height(s), without halting and without actually performing a migration.
If over two-thirds run their nodes with this flag on the old binary, it will allow the chain to continue through
the upgrade with a manual override. (This must be well-documented for anyone syncing from genesis later on).
<p>Example:
<pre>simd start --unsafe-skip-upgrades &lt;height1&gt; &lt;optional_height_2&gt; ... &lt;optional_height_N&gt;
</pre>
<p>NOTE: Here simd is used as an example binary, replace it with original binary

				
			</div>
		</div>

		<div id="pkg-index" class="toggleVisible">
		<div class="collapsed">
			<h2 class="toggleButton" title="Click to show Index section">Index ▹</h2>
		</div>
		<div class="expanded">
			<h2 class="toggleButton" title="Click to hide Index section">Index ▾</h2>

		<!-- Table of contents for API; must be named manual-nav to turn off auto nav. -->
			<div id="manual-nav">
			<dl>
			
			
			
				
				<dd><a href="index.html#BeginBlocker">func BeginBlocker(k *keeper.Keeper, ctx sdk.Context, _ abci.RequestBeginBlock)</a></dd>
			
				
				<dd><a href="index.html#BuildUpgradeNeededMsg">func BuildUpgradeNeededMsg(plan types.Plan) string</a></dd>
			
				
				<dd><a href="index.html#PopulateVersionMap">func PopulateVersionMap(upgradeKeeper *keeper.Keeper, modules map[string]appmodule.AppModule)</a></dd>
			
			
				
				<dd><a href="index.html#AppModule">type AppModule</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#NewAppModule">func NewAppModule(keeper *keeper.Keeper) AppModule</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#AppModule.BeginBlock">func (am AppModule) BeginBlock(ctx sdk.Context, req abci.RequestBeginBlock)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#AppModule.ConsensusVersion">func (AppModule) ConsensusVersion() uint64</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#AppModule.ExportGenesis">func (am AppModule) ExportGenesis(_ sdk.Context, cdc codec.JSONCodec) json.RawMessage</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#AppModule.InitGenesis">func (am AppModule) InitGenesis(ctx sdk.Context, _ codec.JSONCodec, _ json.RawMessage) []abci.ValidatorUpdate</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#AppModule.IsAppModule">func (am AppModule) IsAppModule()</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#AppModule.IsOnePerModuleType">func (am AppModule) IsOnePerModuleType()</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#AppModule.RegisterInvariants">func (AppModule) RegisterInvariants(_ sdk.InvariantRegistry)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#AppModule.RegisterServices">func (am AppModule) RegisterServices(cfg module.Configurator)</a></dd>
				
			
				
				<dd><a href="index.html#AppModuleBasic">type AppModuleBasic</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#AppModuleBasic.DefaultGenesis">func (AppModuleBasic) DefaultGenesis(_ codec.JSONCodec) json.RawMessage</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#AppModuleBasic.GetQueryCmd">func (AppModuleBasic) GetQueryCmd() *cobra.Command</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#AppModuleBasic.GetTxCmd">func (AppModuleBasic) GetTxCmd() *cobra.Command</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#AppModuleBasic.Name">func (AppModuleBasic) Name() string</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#AppModuleBasic.RegisterGRPCGatewayRoutes">func (AppModuleBasic) RegisterGRPCGatewayRoutes(clientCtx client.Context, mux *gwruntime.ServeMux)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#AppModuleBasic.RegisterInterfaces">func (b AppModuleBasic) RegisterInterfaces(registry codectypes.InterfaceRegistry)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#AppModuleBasic.RegisterLegacyAminoCodec">func (AppModuleBasic) RegisterLegacyAminoCodec(cdc *codec.LegacyAmino)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#AppModuleBasic.ValidateGenesis">func (AppModuleBasic) ValidateGenesis(_ codec.JSONCodec, config client.TxEncodingConfig, _ json.RawMessage) error</a></dd>
				
			
				
				<dd><a href="index.html#UpgradeInputs">type UpgradeInputs</a></dd>
				
				
			
				
				<dd><a href="index.html#UpgradeOutputs">type UpgradeOutputs</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#ProvideModule">func ProvideModule(in UpgradeInputs) UpgradeOutputs</a></dd>
				
				
			
			
			</dl>
			</div><!-- #manual-nav -->

		

		
			<h3>Package files</h3>
			<p>
			<span style="font-size:90%">
			
				<a href="http://localhost:6060/src/github.com/cosmos/cosmos-sdk/x/upgrade/abci.go">abci.go</a>
			
				<a href="http://localhost:6060/src/github.com/cosmos/cosmos-sdk/x/upgrade/doc.go">doc.go</a>
			
				<a href="http://localhost:6060/src/github.com/cosmos/cosmos-sdk/x/upgrade/module.go">module.go</a>
			
			</span>
			</p>
		
		</div><!-- .expanded -->
		</div><!-- #pkg-index -->

		

		
		
		
			
			
			<h2 id="BeginBlocker">func <a href="http://localhost:6060/src/github.com/cosmos/cosmos-sdk/x/upgrade/abci.go?s=1011:1089#L14">BeginBlocker</a>
				<a class="permalink" href="index.html#BeginBlocker">&#xb6;</a>
				
				
			</h2>
			<pre>func BeginBlocker(k *<a href="keeper/index.html">keeper</a>.<a href="keeper/index.html#Keeper">Keeper</a>, ctx <a href="../../types/index.html">sdk</a>.<a href="../../types/index.html#Context">Context</a>, _ <a href="../../../../cometbft/cometbft/abci/types/index.html">abci</a>.<a href="../../../../cometbft/cometbft/abci/types/index.html#RequestBeginBlock">RequestBeginBlock</a>)</pre>
			<p>BeginBlock will check if there is a scheduled plan and if it is ready to be executed.
If the current height is in the provided set of heights to skip, it will skip and clear the upgrade plan.
If it is ready, it will execute it if the handler is installed, and panic/abort otherwise.
If the plan is not ready, it will ensure the handler is not registered too early (and abort otherwise).
<p>The purpose is to ensure the binary is switched EXACTLY at the desired block, and to allow
a migration to be executed if needed upon this switch (migration defined in the new binary)
skipUpgradeHeightArray is a set of block heights for which the upgrade must be skipped

			
			

		
			
			
			<h2 id="BuildUpgradeNeededMsg">func <a href="http://localhost:6060/src/github.com/cosmos/cosmos-sdk/x/upgrade/abci.go?s=1822:1872#L41">BuildUpgradeNeededMsg</a>
				<a class="permalink" href="index.html#BuildUpgradeNeededMsg">&#xb6;</a>
				
				
			</h2>
			<pre>func BuildUpgradeNeededMsg(plan <a href="types/index.html">types</a>.<a href="types/index.html#Plan">Plan</a>) <a href="../../../../../builtin/index.html#string">string</a></pre>
			<p>BuildUpgradeNeededMsg prints the message that notifies that an upgrade is needed.

			
			

		
			
			
			<h2 id="PopulateVersionMap">func <a href="http://localhost:6060/src/github.com/cosmos/cosmos-sdk/x/upgrade/module.go?s=6031:6124#L196">PopulateVersionMap</a>
				<a class="permalink" href="index.html#PopulateVersionMap">&#xb6;</a>
				
				
			</h2>
			<pre>func PopulateVersionMap(upgradeKeeper *<a href="keeper/index.html">keeper</a>.<a href="keeper/index.html#Keeper">Keeper</a>, modules map[<a href="../../../../../builtin/index.html#string">string</a>]<a href="../../../../../cosmossdk.io/core/appmodule/index.html">appmodule</a>.<a href="../../../../../cosmossdk.io/core/appmodule/index.html#AppModule">AppModule</a>)</pre>
			
			
			

		
		
			
			
			<h2 id="AppModule">type <a href="http://localhost:6060/src/github.com/cosmos/cosmos-sdk/x/upgrade/module.go?s=2396:2460#L71">AppModule</a>
				<a class="permalink" href="index.html#AppModule">&#xb6;</a>
				
				
			</h2>
			<p>AppModule implements the sdk.AppModule interface

			<pre>type AppModule struct {
    <a href="index.html#AppModuleBasic">AppModuleBasic</a>
    <span class="comment">// contains filtered or unexported fields</span>
}
</pre>

			

			

			
			
			

			
				
				<h3 id="NewAppModule">func <a href="http://localhost:6060/src/github.com/cosmos/cosmos-sdk/x/upgrade/module.go?s=2509:2559#L77">NewAppModule</a>
					<a class="permalink" href="index.html#NewAppModule">&#xb6;</a>
					
					
				</h3>
				<pre>func NewAppModule(keeper *<a href="keeper/index.html">keeper</a>.<a href="keeper/index.html#Keeper">Keeper</a>) <a href="index.html#AppModule">AppModule</a></pre>
				<p>NewAppModule creates a new AppModule object

				
				
			

			
				
				<h3 id="AppModule.BeginBlock">func (AppModule) <a href="http://localhost:6060/src/github.com/cosmos/cosmos-sdk/x/upgrade/module.go?s=4959:5034#L145">BeginBlock</a>
					<a class="permalink" href="index.html#AppModule.BeginBlock">&#xb6;</a>
					
					
				</h3>
				<pre>func (am <a href="index.html#AppModule">AppModule</a>) BeginBlock(ctx <a href="../../types/index.html">sdk</a>.<a href="../../types/index.html#Context">Context</a>, req <a href="../../../../cometbft/cometbft/abci/types/index.html">abci</a>.<a href="../../../../cometbft/cometbft/abci/types/index.html#RequestBeginBlock">RequestBeginBlock</a>)</pre>
				<p>BeginBlock calls the upgrade module hooks
<p>CONTRACT: this is registered in BeginBlocker *before* all other modules&apos; BeginBlock functions

				
				
				
			
				
				<h3 id="AppModule.ConsensusVersion">func (AppModule) <a href="http://localhost:6060/src/github.com/cosmos/cosmos-sdk/x/upgrade/module.go?s=4742:4784#L140">ConsensusVersion</a>
					<a class="permalink" href="index.html#AppModule.ConsensusVersion">&#xb6;</a>
					
					
				</h3>
				<pre>func (<a href="index.html#AppModule">AppModule</a>) ConsensusVersion() <a href="../../../../../builtin/index.html#uint64">uint64</a></pre>
				<p>ConsensusVersion implements AppModule/ConsensusVersion.

				
				
				
			
				
				<h3 id="AppModule.ExportGenesis">func (AppModule) <a href="http://localhost:6060/src/github.com/cosmos/cosmos-sdk/x/upgrade/module.go?s=4561:4646#L135">ExportGenesis</a>
					<a class="permalink" href="index.html#AppModule.ExportGenesis">&#xb6;</a>
					
					
				</h3>
				<pre>func (am <a href="index.html#AppModule">AppModule</a>) ExportGenesis(_ <a href="../../types/index.html">sdk</a>.<a href="../../types/index.html#Context">Context</a>, cdc <a href="../../codec/index.html">codec</a>.<a href="../../codec/index.html#JSONCodec">JSONCodec</a>) <a href="../../../../../encoding/json/index.html">json</a>.<a href="../../../../../encoding/json/index.html#RawMessage">RawMessage</a></pre>
				<p>ExportGenesis is always empty, as InitGenesis does nothing either

				
				
				
			
				
				<h3 id="AppModule.InitGenesis">func (AppModule) <a href="http://localhost:6060/src/github.com/cosmos/cosmos-sdk/x/upgrade/module.go?s=3500:3609#L107">InitGenesis</a>
					<a class="permalink" href="index.html#AppModule.InitGenesis">&#xb6;</a>
					
					
				</h3>
				<pre>func (am <a href="index.html#AppModule">AppModule</a>) InitGenesis(ctx <a href="../../types/index.html">sdk</a>.<a href="../../types/index.html#Context">Context</a>, _ <a href="../../codec/index.html">codec</a>.<a href="../../codec/index.html#JSONCodec">JSONCodec</a>, _ <a href="../../../../../encoding/json/index.html">json</a>.<a href="../../../../../encoding/json/index.html#RawMessage">RawMessage</a>) []<a href="../../../../cometbft/cometbft/abci/types/index.html">abci</a>.<a href="../../../../cometbft/cometbft/abci/types/index.html#ValidatorUpdate">ValidatorUpdate</a></pre>
				<p>InitGenesis is ignored, no sense in serializing future upgrades

				
				
				
			
				
				<h3 id="AppModule.IsAppModule">func (AppModule) <a href="http://localhost:6060/src/github.com/cosmos/cosmos-sdk/x/upgrade/module.go?s=2871:2904#L90">IsAppModule</a>
					<a class="permalink" href="index.html#AppModule.IsAppModule">&#xb6;</a>
					
					
				</h3>
				<pre>func (am <a href="index.html#AppModule">AppModule</a>) IsAppModule()</pre>
				<p>IsAppModule implements the appmodule.AppModule interface.

				
				
				
			
				
				<h3 id="AppModule.IsOnePerModuleType">func (AppModule) <a href="http://localhost:6060/src/github.com/cosmos/cosmos-sdk/x/upgrade/module.go?s=2765:2805#L87">IsOnePerModuleType</a>
					<a class="permalink" href="index.html#AppModule.IsOnePerModuleType">&#xb6;</a>
					
					
				</h3>
				<pre>func (am <a href="index.html#AppModule">AppModule</a>) IsOnePerModuleType()</pre>
				<p>IsOnePerModuleType implements the depinject.OnePerModuleType interface.

				
				
				
			
				
				<h3 id="AppModule.RegisterInvariants">func (AppModule) <a href="http://localhost:6060/src/github.com/cosmos/cosmos-sdk/x/upgrade/module.go?s=2980:3040#L93">RegisterInvariants</a>
					<a class="permalink" href="index.html#AppModule.RegisterInvariants">&#xb6;</a>
					
					
				</h3>
				<pre>func (<a href="index.html#AppModule">AppModule</a>) RegisterInvariants(_ <a href="../../types/index.html">sdk</a>.<a href="../../types/index.html#InvariantRegistry">InvariantRegistry</a>)</pre>
				<p>RegisterInvariants does nothing, there are no invariants to enforce

				
				
				
			
				
				<h3 id="AppModule.RegisterServices">func (AppModule) <a href="http://localhost:6060/src/github.com/cosmos/cosmos-sdk/x/upgrade/module.go?s=3092:3153#L96">RegisterServices</a>
					<a class="permalink" href="index.html#AppModule.RegisterServices">&#xb6;</a>
					
					
				</h3>
				<pre>func (am <a href="index.html#AppModule">AppModule</a>) RegisterServices(cfg <a href="../../types/module/index.html">module</a>.<a href="../../types/module/index.html#Configurator">Configurator</a>)</pre>
				<p>RegisterServices registers module services.

				
				
				
			
		
			
			
			<h2 id="AppModuleBasic">type <a href="http://localhost:6060/src/github.com/cosmos/cosmos-sdk/x/upgrade/module.go?s=1215:1243#L36">AppModuleBasic</a>
				<a class="permalink" href="index.html#AppModuleBasic">&#xb6;</a>
				
				
			</h2>
			<p>AppModuleBasic implements the sdk.AppModuleBasic interface

			<pre>type AppModuleBasic struct{}
</pre>

			

			

			
			
			

			

			
				
				<h3 id="AppModuleBasic.DefaultGenesis">func (AppModuleBasic) <a href="http://localhost:6060/src/github.com/cosmos/cosmos-sdk/x/upgrade/module.go?s=4199:4270#L125">DefaultGenesis</a>
					<a class="permalink" href="index.html#AppModuleBasic.DefaultGenesis">&#xb6;</a>
					
					
				</h3>
				<pre>func (<a href="index.html#AppModuleBasic">AppModuleBasic</a>) DefaultGenesis(_ <a href="../../codec/index.html">codec</a>.<a href="../../codec/index.html#JSONCodec">JSONCodec</a>) <a href="../../../../../encoding/json/index.html">json</a>.<a href="../../../../../encoding/json/index.html#RawMessage">RawMessage</a></pre>
				<p>DefaultGenesis is an empty object

				
				
				
			
				
				<h3 id="AppModuleBasic.GetQueryCmd">func (AppModuleBasic) <a href="http://localhost:6060/src/github.com/cosmos/cosmos-sdk/x/upgrade/module.go?s=1923:1973#L56">GetQueryCmd</a>
					<a class="permalink" href="index.html#AppModuleBasic.GetQueryCmd">&#xb6;</a>
					
					
				</h3>
				<pre>func (<a href="index.html#AppModuleBasic">AppModuleBasic</a>) GetQueryCmd() *<a href="../../../../spf13/cobra/index.html">cobra</a>.<a href="../../../../spf13/cobra/index.html#Command">Command</a></pre>
				<p>GetQueryCmd returns the CLI query commands for this module

				
				
				
			
				
				<h3 id="AppModuleBasic.GetTxCmd">func (AppModuleBasic) <a href="http://localhost:6060/src/github.com/cosmos/cosmos-sdk/x/upgrade/module.go?s=2070:2117#L61">GetTxCmd</a>
					<a class="permalink" href="index.html#AppModuleBasic.GetTxCmd">&#xb6;</a>
					
					
				</h3>
				<pre>func (<a href="index.html#AppModuleBasic">AppModuleBasic</a>) GetTxCmd() *<a href="../../../../spf13/cobra/index.html">cobra</a>.<a href="../../../../spf13/cobra/index.html#Command">Command</a></pre>
				<p>GetTxCmd returns the CLI transaction commands for this module

				
				
				
			
				
				<h3 id="AppModuleBasic.Name">func (AppModuleBasic) <a href="http://localhost:6060/src/github.com/cosmos/cosmos-sdk/x/upgrade/module.go?s=1276:1311#L39">Name</a>
					<a class="permalink" href="index.html#AppModuleBasic.Name">&#xb6;</a>
					
					
				</h3>
				<pre>func (<a href="index.html#AppModuleBasic">AppModuleBasic</a>) Name() <a href="../../../../../builtin/index.html#string">string</a></pre>
				<p>Name returns the ModuleName

				
				
				
			
				
				<h3 id="AppModuleBasic.RegisterGRPCGatewayRoutes">func (AppModuleBasic) <a href="http://localhost:6060/src/github.com/cosmos/cosmos-sdk/x/upgrade/module.go?s=1623:1721#L49">RegisterGRPCGatewayRoutes</a>
					<a class="permalink" href="index.html#AppModuleBasic.RegisterGRPCGatewayRoutes">&#xb6;</a>
					
					
				</h3>
				<pre>func (<a href="index.html#AppModuleBasic">AppModuleBasic</a>) RegisterGRPCGatewayRoutes(clientCtx <a href="../../client/index.html">client</a>.<a href="../../client/index.html#Context">Context</a>, mux *<a href="../../../../grpc-ecosystem/grpc-gateway/runtime/index.html">gwruntime</a>.<a href="../../../../grpc-ecosystem/grpc-gateway/runtime/index.html#ServeMux">ServeMux</a>)</pre>
				<p>RegisterGRPCGatewayRoutes registers the gRPC Gateway routes for the upgrade module.

				
				
				
			
				
				<h3 id="AppModuleBasic.RegisterInterfaces">func (AppModuleBasic) <a href="http://localhost:6060/src/github.com/cosmos/cosmos-sdk/x/upgrade/module.go?s=2221:2302#L66">RegisterInterfaces</a>
					<a class="permalink" href="index.html#AppModuleBasic.RegisterInterfaces">&#xb6;</a>
					
					
				</h3>
				<pre>func (b <a href="index.html#AppModuleBasic">AppModuleBasic</a>) RegisterInterfaces(registry <a href="../../codec/types/index.html">codectypes</a>.<a href="../../codec/types/index.html#InterfaceRegistry">InterfaceRegistry</a>)</pre>
				<p>RegisterInterfaces registers interfaces and implementations of the upgrade module.

				
				
				
			
				
				<h3 id="AppModuleBasic.RegisterLegacyAminoCodec">func (AppModuleBasic) <a href="http://localhost:6060/src/github.com/cosmos/cosmos-sdk/x/upgrade/module.go?s=1423:1493#L44">RegisterLegacyAminoCodec</a>
					<a class="permalink" href="index.html#AppModuleBasic.RegisterLegacyAminoCodec">&#xb6;</a>
					
					
				</h3>
				<pre>func (<a href="index.html#AppModuleBasic">AppModuleBasic</a>) RegisterLegacyAminoCodec(cdc *<a href="../../codec/index.html">codec</a>.<a href="../../codec/index.html#LegacyAmino">LegacyAmino</a>)</pre>
				<p>RegisterLegacyAminoCodec registers the upgrade types on the LegacyAmino codec

				
				
				
			
				
				<h3 id="AppModuleBasic.ValidateGenesis">func (AppModuleBasic) <a href="http://localhost:6060/src/github.com/cosmos/cosmos-sdk/x/upgrade/module.go?s=4361:4474#L130">ValidateGenesis</a>
					<a class="permalink" href="index.html#AppModuleBasic.ValidateGenesis">&#xb6;</a>
					
					
				</h3>
				<pre>func (<a href="index.html#AppModuleBasic">AppModuleBasic</a>) ValidateGenesis(_ <a href="../../codec/index.html">codec</a>.<a href="../../codec/index.html#JSONCodec">JSONCodec</a>, config <a href="../../client/index.html">client</a>.<a href="../../client/index.html#TxEncodingConfig">TxEncodingConfig</a>, _ <a href="../../../../../encoding/json/index.html">json</a>.<a href="../../../../../encoding/json/index.html#RawMessage">RawMessage</a>) <a href="../../../../../builtin/index.html#error">error</a></pre>
				<p>ValidateGenesis is always successful, as we ignore the value

				
				
				
			
		
			
			
			<h2 id="UpgradeInputs">type <a href="http://localhost:6060/src/github.com/cosmos/cosmos-sdk/x/upgrade/module.go?s=5238:5404#L160">UpgradeInputs</a>
				<a class="permalink" href="index.html#UpgradeInputs">&#xb6;</a>
				
				
			</h2>
			
			<pre>type UpgradeInputs struct {
    <a href="../../../../../cosmossdk.io/depinject/index.html">depinject</a>.<a href="../../../../../cosmossdk.io/depinject/index.html#In">In</a>

<span id="UpgradeInputs.Config"></span>    Config *<a href="../../../../../cosmossdk.io/api/cosmos/upgrade/module/v1/index.html">modulev1</a>.<a href="../../../../../cosmossdk.io/api/cosmos/upgrade/module/v1/index.html#Module">Module</a>
<span id="UpgradeInputs.Key"></span>    Key    *<a href="../../store/types/index.html">store</a>.<a href="../../store/types/index.html#KVStoreKey">KVStoreKey</a>
<span id="UpgradeInputs.Cdc"></span>    Cdc    <a href="../../codec/index.html">codec</a>.<a href="../../codec/index.html#Codec">Codec</a>

<span id="UpgradeInputs.AppOpts"></span>    AppOpts <a href="../../server/types/index.html">servertypes</a>.<a href="../../server/types/index.html#AppOptions">AppOptions</a> `optional:&#34;true&#34;`
}
</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="UpgradeOutputs">type <a href="http://localhost:6060/src/github.com/cosmos/cosmos-sdk/x/upgrade/module.go?s=5406:5554#L170">UpgradeOutputs</a>
				<a class="permalink" href="index.html#UpgradeOutputs">&#xb6;</a>
				
				
			</h2>
			
			<pre>type UpgradeOutputs struct {
    <a href="../../../../../cosmossdk.io/depinject/index.html">depinject</a>.<a href="../../../../../cosmossdk.io/depinject/index.html#Out">Out</a>

<span id="UpgradeOutputs.UpgradeKeeper"></span>    UpgradeKeeper *<a href="keeper/index.html">keeper</a>.<a href="keeper/index.html#Keeper">Keeper</a>
<span id="UpgradeOutputs.Module"></span>    Module        <a href="../../../../../cosmossdk.io/core/appmodule/index.html">appmodule</a>.<a href="../../../../../cosmossdk.io/core/appmodule/index.html#AppModule">AppModule</a>
<span id="UpgradeOutputs.BaseAppOption"></span>    BaseAppOption <a href="../../runtime/index.html">runtime</a>.<a href="../../runtime/index.html#BaseAppOption">BaseAppOption</a>
}
</pre>

			

			

			
			
			

			
				
				<h3 id="ProvideModule">func <a href="http://localhost:6060/src/github.com/cosmos/cosmos-sdk/x/upgrade/module.go?s=5556:5607#L178">ProvideModule</a>
					<a class="permalink" href="index.html#ProvideModule">&#xb6;</a>
					
					
				</h3>
				<pre>func ProvideModule(in <a href="index.html#UpgradeInputs">UpgradeInputs</a>) <a href="index.html#UpgradeOutputs">UpgradeOutputs</a></pre>
				
				
				
			

			
		
	

	





	
	
		<h2 id="pkg-subdirectories">Subdirectories</h2>
	
	<div class="pkg-dir">
		<table>
			<tr>
				<th class="pkg-name">Name</th>
				<th class="pkg-synopsis">Synopsis</th>
			</tr>

			
			<tr>
				<td colspan="2"><a href="../index.html">..</a></td>
			</tr>
			

			
				<tr>
				
					<td class="pkg-name" style="padding-left: 0px;">
						<a href="client/index.html">client</a>
					</td>
				
					<td class="pkg-synopsis">
						
					</td>
				</tr>
			
				<tr>
				
					<td class="pkg-name" style="padding-left: 20px;">
						<a href="client/cli/index.html">cli</a>
					</td>
				
					<td class="pkg-synopsis">
						
					</td>
				</tr>
			
				<tr>
				
					<td class="pkg-name" style="padding-left: 0px;">
						<a href="exported/index.html">exported</a>
					</td>
				
					<td class="pkg-synopsis">
						
					</td>
				</tr>
			
				<tr>
				
					<td class="pkg-name" style="padding-left: 0px;">
						<a href="keeper/index.html">keeper</a>
					</td>
				
					<td class="pkg-synopsis">
						
					</td>
				</tr>
			
				<tr>
				
					<td class="pkg-name" style="padding-left: 0px;">
						<a href="types/index.html">types</a>
					</td>
				
					<td class="pkg-synopsis">
						Package types is a reverse proxy.
					</td>
				</tr>
			
		</table>
	</div>



<div id="footer">
Build version go1.19.10.<br>
Except as <a href="https://developers.google.com/site-policies#restrictions">noted</a>,
the content of this page is licensed under the
Creative Commons Attribution 3.0 License,
and code is licensed under a <a href="http://localhost:6060/LICENSE">BSD license</a>.<br>
<a href="https://golang.org/doc/tos.html">Terms of Service</a> |
<a href="https://www.google.com/intl/en/policies/privacy/">Privacy Policy</a>
</div>

</div><!-- .container -->
</div><!-- #page -->
</body>
</html>
