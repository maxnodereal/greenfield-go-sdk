<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#375EAB">

  <title>sd - Go Documentation Server</title>

<link type="text/css" rel="stylesheet" href="../../../../../lib/godoc/style.css">

<script>window.initFuncs = [];</script>
<script src="../../../../../lib/godoc/jquery.js" defer></script>



<script>var goVersion = "go1.19.10";</script>
<script src="../../../../../lib/godoc/godocs.js" defer></script>
</head>
<body>

<div id='lowframe' style="position: fixed; bottom: 0; left: 0; height: 0; width: 100%; border-top: thin solid grey; background-color: white; overflow: auto;">
...
</div><!-- #lowframe -->

<div id="topbar" class="wide"><div class="container">
<div class="top-heading" id="heading-wide"><a href="http://localhost:6060/pkg/">Go Documentation Server</a></div>
<div class="top-heading" id="heading-narrow"><a href="http://localhost:6060/pkg/">GoDoc</a></div>
<a href="index.html#" id="menu-button"><span id="menu-button-arrow">&#9661;</span></a>
<form method="GET" action="http://localhost:6060/search">
<div id="menu">

<span class="search-box"><input type="search" id="search" name="q" placeholder="Search" aria-label="Search" required><button type="submit"><span><!-- magnifying glass: --><svg width="24" height="24" viewBox="0 0 24 24"><title>submit search</title><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/><path d="M0 0h24v24H0z" fill="none"/></svg></span></button></span>
</div>
</form>

</div></div>



<div id="page" class="wide">
<div class="container">


  <h1>
    Package sd
    <span class="text-muted"></span>
  </h1>







<div id="nav"></div>


<!--
	Copyright 2009 The Go Authors. All rights reserved.
	Use of this source code is governed by a BSD-style
	license that can be found in the LICENSE file.
-->
<!--
	Note: Static (i.e., not template-generated) href and id
	attributes start with "pkg-" to make it impossible for
	them to conflict with generated attributes (some of which
	correspond to Go identifiers).
-->

	<script>
	document.ANALYSIS_DATA = null;
	document.CALLGRAPH = null;
	</script>

	
		
		<div id="short-nav">
			<dl>
			<dd><code>import "github.com/go-kit/kit/sd"</code></dd>
			</dl>
			<dl>
			<dd><a href="index.html#pkg-overview" class="overviewLink">Overview</a></dd>
			<dd><a href="index.html#pkg-index" class="indexLink">Index</a></dd>
			
			
				<dd><a href="index.html#pkg-subdirectories">Subdirectories</a></dd>
			
			</dl>
		</div>
		<!-- The package's Name is printed as title by the top-level template -->
		<div id="pkg-overview" class="toggleVisible">
			<div class="collapsed">
				<h2 class="toggleButton" title="Click to show Overview section">Overview ▹</h2>
			</div>
			<div class="expanded">
				<h2 class="toggleButton" title="Click to hide Overview section">Overview ▾</h2>
				<p>Package sd provides utilities related to service discovery. That includes the
client-side loadbalancer pattern, where a microservice subscribes to a
service discovery system in order to reach remote instances; as well as the
registrator pattern, where a microservice registers itself in a service
discovery system. Implementations are provided for most common systems.

				
			</div>
		</div>

		<div id="pkg-index" class="toggleVisible">
		<div class="collapsed">
			<h2 class="toggleButton" title="Click to show Index section">Index ▹</h2>
		</div>
		<div class="expanded">
			<h2 class="toggleButton" title="Click to hide Index section">Index ▾</h2>

		<!-- Table of contents for API; must be named manual-nav to turn off auto nav. -->
			<div id="manual-nav">
			<dl>
			
			
			
			
				
				<dd><a href="index.html#DefaultEndpointer">type DefaultEndpointer</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#NewEndpointer">func NewEndpointer(src Instancer, f Factory, logger log.Logger, options ...EndpointerOption) *DefaultEndpointer</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#DefaultEndpointer.Close">func (de *DefaultEndpointer) Close()</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#DefaultEndpointer.Endpoints">func (de *DefaultEndpointer) Endpoints() ([]endpoint.Endpoint, error)</a></dd>
				
			
				
				<dd><a href="index.html#Endpointer">type Endpointer</a></dd>
				
				
			
				
				<dd><a href="index.html#EndpointerOption">type EndpointerOption</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#InvalidateOnError">func InvalidateOnError(timeout time.Duration) EndpointerOption</a></dd>
				
				
			
				
				<dd><a href="index.html#Event">type Event</a></dd>
				
				
			
				
				<dd><a href="index.html#Factory">type Factory</a></dd>
				
				
			
				
				<dd><a href="index.html#FixedEndpointer">type FixedEndpointer</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#FixedEndpointer.Endpoints">func (s FixedEndpointer) Endpoints() ([]endpoint.Endpoint, error)</a></dd>
				
			
				
				<dd><a href="index.html#FixedInstancer">type FixedInstancer</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#FixedInstancer.Deregister">func (d FixedInstancer) Deregister(ch chan&lt;- Event)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#FixedInstancer.Register">func (d FixedInstancer) Register(ch chan&lt;- Event)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#FixedInstancer.Stop">func (d FixedInstancer) Stop()</a></dd>
				
			
				
				<dd><a href="index.html#Instancer">type Instancer</a></dd>
				
				
			
				
				<dd><a href="index.html#Registrar">type Registrar</a></dd>
				
				
			
			
			</dl>
			</div><!-- #manual-nav -->

		

		
			<h3>Package files</h3>
			<p>
			<span style="font-size:90%">
			
				<a href="http://localhost:6060/src/github.com/go-kit/kit/sd/doc.go">doc.go</a>
			
				<a href="http://localhost:6060/src/github.com/go-kit/kit/sd/endpoint_cache.go">endpoint_cache.go</a>
			
				<a href="http://localhost:6060/src/github.com/go-kit/kit/sd/endpointer.go">endpointer.go</a>
			
				<a href="http://localhost:6060/src/github.com/go-kit/kit/sd/factory.go">factory.go</a>
			
				<a href="http://localhost:6060/src/github.com/go-kit/kit/sd/instancer.go">instancer.go</a>
			
				<a href="http://localhost:6060/src/github.com/go-kit/kit/sd/registrar.go">registrar.go</a>
			
			</span>
			</p>
		
		</div><!-- .expanded -->
		</div><!-- #pkg-index -->

		

		
		
		
		
			
			
			<h2 id="DefaultEndpointer">type <a href="http://localhost:6060/src/github.com/go-kit/kit/sd/endpointer.go?s=2457:2559#L59">DefaultEndpointer</a>
				<a class="permalink" href="index.html#DefaultEndpointer">&#xb6;</a>
				
				
			</h2>
			<p>DefaultEndpointer implements an Endpointer interface.
When created with NewEndpointer function, it automatically registers
as a subscriber to events from the Instances and maintains a list
of active Endpoints.

			<pre>type DefaultEndpointer struct {
    <span class="comment">// contains filtered or unexported fields</span>
}
</pre>

			

			

			
			
			

			
				
				<h3 id="NewEndpointer">func <a href="http://localhost:6060/src/github.com/go-kit/kit/sd/endpointer.go?s=969:1080#L18">NewEndpointer</a>
					<a class="permalink" href="index.html#NewEndpointer">&#xb6;</a>
					
					
				</h3>
				<pre>func NewEndpointer(src <a href="index.html#Instancer">Instancer</a>, f <a href="index.html#Factory">Factory</a>, logger <a href="../../log/index.html">log</a>.<a href="../../log/index.html#Logger">Logger</a>, options ...<a href="index.html#EndpointerOption">EndpointerOption</a>) *<a href="index.html#DefaultEndpointer">DefaultEndpointer</a></pre>
				<p>NewEndpointer creates an Endpointer that subscribes to updates from Instancer src
and uses factory f to create Endpoints. If src notifies of an error, the Endpointer
keeps returning previously created Endpoints assuming they are still good, unless
this behavior is disabled via InvalidateOnError option.

				
				
			

			
				
				<h3 id="DefaultEndpointer.Close">func (*DefaultEndpointer) <a href="http://localhost:6060/src/github.com/go-kit/kit/sd/endpointer.go?s=2754:2790#L72">Close</a>
					<a class="permalink" href="index.html#DefaultEndpointer.Close">&#xb6;</a>
					
					
				</h3>
				<pre>func (de *<a href="index.html#DefaultEndpointer">DefaultEndpointer</a>) Close()</pre>
				<p>Close deregisters DefaultEndpointer from the Instancer and stops the internal go-routine.

				
				
				
			
				
				<h3 id="DefaultEndpointer.Endpoints">func (*DefaultEndpointer) <a href="http://localhost:6060/src/github.com/go-kit/kit/sd/endpointer.go?s=2878:2947#L78">Endpoints</a>
					<a class="permalink" href="index.html#DefaultEndpointer.Endpoints">&#xb6;</a>
					
					
				</h3>
				<pre>func (de *<a href="index.html#DefaultEndpointer">DefaultEndpointer</a>) Endpoints() ([]<a href="../endpoint/index.html">endpoint</a>.<a href="../endpoint/index.html#Endpoint">Endpoint</a>, <a href="../../../../builtin/index.html#error">error</a>)</pre>
				<p>Endpoints implements Endpointer.

				
				
				
			
		
			
			
			<h2 id="Endpointer">type <a href="http://localhost:6060/src/github.com/go-kit/kit/sd/endpointer.go?s=365:436#L4">Endpointer</a>
				<a class="permalink" href="index.html#Endpointer">&#xb6;</a>
				
				
			</h2>
			<p>Endpointer listens to a service discovery system and yields a set of
identical endpoints on demand. An error indicates a problem with connectivity
to the service discovery system, or within the system itself; an Endpointer
may yield no endpoints without error.

			<pre>type Endpointer interface {
    Endpoints() ([]<a href="../endpoint/index.html">endpoint</a>.<a href="../endpoint/index.html#Endpoint">Endpoint</a>, <a href="../../../../builtin/index.html#error">error</a>)
}</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="EndpointerOption">type <a href="http://localhost:6060/src/github.com/go-kit/kit/sd/endpointer.go?s=1400:1446#L34">EndpointerOption</a>
				<a class="permalink" href="index.html#EndpointerOption">&#xb6;</a>
				
				
			</h2>
			<p>EndpointerOption allows control of endpointCache behavior.

			<pre>type EndpointerOption func(*endpointerOptions)</pre>

			

			

			
			
			

			
				
				<h3 id="InvalidateOnError">func <a href="http://localhost:6060/src/github.com/go-kit/kit/sd/endpointer.go?s=1965:2027#L43">InvalidateOnError</a>
					<a class="permalink" href="index.html#InvalidateOnError">&#xb6;</a>
					
					
				</h3>
				<pre>func InvalidateOnError(timeout <a href="../../../../time/index.html">time</a>.<a href="../../../../time/index.html#Duration">Duration</a>) <a href="index.html#EndpointerOption">EndpointerOption</a></pre>
				<p>InvalidateOnError returns EndpointerOption that controls how the Endpointer
behaves when then Instancer publishes an Event containing an error.
Without this option the Endpointer continues returning the last known
endpoints. With this option, the Endpointer continues returning the last
known endpoints until the timeout elapses, then closes all active endpoints
and starts returning an error. Once the Instancer sends a new update with
valid resource instances, the normal operation is resumed.

				
				
			

			
		
			
			
			<h2 id="Event">type <a href="http://localhost:6060/src/github.com/go-kit/kit/sd/instancer.go?s=748:806#L2">Event</a>
				<a class="permalink" href="index.html#Event">&#xb6;</a>
				
				
			</h2>
			<p>Event represents a push notification generated from the underlying service discovery
implementation. It contains either a full set of available resource instances, or
an error indicating some issue with obtaining information from discovery backend.
Examples of errors may include loosing connection to the discovery backend, or
trying to look up resource instances using an incorrectly formatted key.
After receiving an Event with an error the listenter should treat previously discovered
resource instances as stale (although it may choose to continue using them).
If the Instancer is able to restore connection to the discovery backend it must push
another Event with the current set of resource instances.

			<pre>type Event struct {
<span id="Event.Instances"></span>    Instances []<a href="../../../../builtin/index.html#string">string</a>
<span id="Event.Err"></span>    Err       <a href="../../../../builtin/index.html#error">error</a>
}
</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="Factory">type <a href="http://localhost:6060/src/github.com/go-kit/kit/sd/factory.go?s=544:616#L7">Factory</a>
				<a class="permalink" href="index.html#Factory">&#xb6;</a>
				
				
			</h2>
			<p>Factory is a function that converts an instance string (e.g. host:port) to a
specific endpoint. Instances that provide multiple endpoints require multiple
factories. A factory also returns an io.Closer that&apos;s invoked when the
instance goes away and needs to be cleaned up. Factories may return nil
closers.
<p>Users are expected to provide their own factory functions that assume
specific transports, or can deduce transports by parsing the instance string.

			<pre>type Factory func(instance <a href="../../../../builtin/index.html#string">string</a>) (<a href="../endpoint/index.html">endpoint</a>.<a href="../endpoint/index.html#Endpoint">Endpoint</a>, <a href="../../../../io/index.html">io</a>.<a href="../../../../io/index.html#Closer">Closer</a>, <a href="../../../../builtin/index.html#error">error</a>)</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="FixedEndpointer">type <a href="http://localhost:6060/src/github.com/go-kit/kit/sd/endpointer.go?s=490:530#L9">FixedEndpointer</a>
				<a class="permalink" href="index.html#FixedEndpointer">&#xb6;</a>
				
				
			</h2>
			<p>FixedEndpointer yields a fixed set of endpoints.

			<pre>type FixedEndpointer []<a href="../endpoint/index.html">endpoint</a>.<a href="../endpoint/index.html#Endpoint">Endpoint</a></pre>

			

			

			
			
			

			

			
				
				<h3 id="FixedEndpointer.Endpoints">func (FixedEndpointer) <a href="http://localhost:6060/src/github.com/go-kit/kit/sd/endpointer.go?s=568:633#L12">Endpoints</a>
					<a class="permalink" href="index.html#FixedEndpointer.Endpoints">&#xb6;</a>
					
					
				</h3>
				<pre>func (s <a href="index.html#FixedEndpointer">FixedEndpointer</a>) Endpoints() ([]<a href="../endpoint/index.html">endpoint</a>.<a href="../endpoint/index.html#Endpoint">Endpoint</a>, <a href="../../../../builtin/index.html#error">error</a>)</pre>
				<p>Endpoints implements Endpointer.

				
				
				
			
		
			
			
			<h2 id="FixedInstancer">type <a href="http://localhost:6060/src/github.com/go-kit/kit/sd/instancer.go?s=1293:1321#L19">FixedInstancer</a>
				<a class="permalink" href="index.html#FixedInstancer">&#xb6;</a>
				
				
			</h2>
			<p>FixedInstancer yields a fixed set of instances.

			<pre>type FixedInstancer []<a href="../../../../builtin/index.html#string">string</a></pre>

			

			

			
			
			

			

			
				
				<h3 id="FixedInstancer.Deregister">func (FixedInstancer) <a href="http://localhost:6060/src/github.com/go-kit/kit/sd/instancer.go?s=1474:1525#L25">Deregister</a>
					<a class="permalink" href="index.html#FixedInstancer.Deregister">&#xb6;</a>
					
					
				</h3>
				<pre>func (d <a href="index.html#FixedInstancer">FixedInstancer</a>) Deregister(ch chan&lt;- <a href="index.html#Event">Event</a>)</pre>
				<p>Deregister implements Instancer.

				
				
				
			
				
				<h3 id="FixedInstancer.Register">func (FixedInstancer) <a href="http://localhost:6060/src/github.com/go-kit/kit/sd/instancer.go?s=1357:1406#L22">Register</a>
					<a class="permalink" href="index.html#FixedInstancer.Register">&#xb6;</a>
					
					
				</h3>
				<pre>func (d <a href="index.html#FixedInstancer">FixedInstancer</a>) Register(ch chan&lt;- <a href="index.html#Event">Event</a>)</pre>
				<p>Register implements Instancer.

				
				
				
			
				
				<h3 id="FixedInstancer.Stop">func (FixedInstancer) <a href="http://localhost:6060/src/github.com/go-kit/kit/sd/instancer.go?s=1560:1590#L28">Stop</a>
					<a class="permalink" href="index.html#FixedInstancer.Stop">&#xb6;</a>
					
					
				</h3>
				<pre>func (d <a href="index.html#FixedInstancer">FixedInstancer</a>) Stop()</pre>
				<p>Stop implements Instancer.

				
				
				
			
		
			
			
			<h2 id="Instancer">type <a href="http://localhost:6060/src/github.com/go-kit/kit/sd/instancer.go?s=1154:1240#L12">Instancer</a>
				<a class="permalink" href="index.html#Instancer">&#xb6;</a>
				
				
			</h2>
			<p>Instancer listens to a service discovery system and notifies registered
observers of changes in the resource instances. Every event sent to the channels
contains a complete set of instances known to the Instancer. That complete set is
sent immediately upon registering the channel, and on any future updates from
discovery system.

			<pre>type Instancer interface {
    Register(chan&lt;- <a href="index.html#Event">Event</a>)
    Deregister(chan&lt;- <a href="index.html#Event">Event</a>)
    Stop()
}</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="Registrar">type <a href="http://localhost:6060/src/github.com/go-kit/kit/sd/registrar.go?s=454:508#L1">Registrar</a>
				<a class="permalink" href="index.html#Registrar">&#xb6;</a>
				
				
			</h2>
			<p>Registrar registers instance information to a service discovery system when
an instance becomes alive and healthy, and deregisters that information when
the service becomes unhealthy or goes away.
<p>Registrar implementations exist for various service discovery systems. Note
that identifying instance information (e.g. host:port) must be given via the
concrete constructor; this interface merely signals lifecycle changes.

			<pre>type Registrar interface {
    Register()
    Deregister()
}</pre>

			

			

			
			
			

			

			
		
	

	





	
	
		<h2 id="pkg-subdirectories">Subdirectories</h2>
	
	<div class="pkg-dir">
		<table>
			<tr>
				<th class="pkg-name">Name</th>
				<th class="pkg-synopsis">Synopsis</th>
			</tr>

			
			<tr>
				<td colspan="2"><a href="../index.html">..</a></td>
			</tr>
			

			
				<tr>
				
					<td class="pkg-name" style="padding-left: 0px;">
						<a href="consul/index.html">consul</a>
					</td>
				
					<td class="pkg-synopsis">
						Package consul provides Instancer and Registrar implementations for Consul.
					</td>
				</tr>
			
				<tr>
				
					<td class="pkg-name" style="padding-left: 0px;">
						<a href="dnssrv/index.html">dnssrv</a>
					</td>
				
					<td class="pkg-synopsis">
						Package dnssrv provides an Instancer implementation for DNS SRV records.
					</td>
				</tr>
			
				<tr>
				
					<td class="pkg-name" style="padding-left: 0px;">
						<a href="etcd/index.html">etcd</a>
					</td>
				
					<td class="pkg-synopsis">
						Package etcd provides an Instancer and Registrar implementation for etcd.
					</td>
				</tr>
			
				<tr>
				
					<td class="pkg-name" style="padding-left: 0px;">
						<a href="etcdv3/index.html">etcdv3</a>
					</td>
				
					<td class="pkg-synopsis">
						Package etcdv3 provides an Instancer and Registrar implementation for etcd v3.
					</td>
				</tr>
			
				<tr>
				
					<td class="pkg-name" style="padding-left: 0px;">
						<a href="eureka/index.html">eureka</a>
					</td>
				
					<td class="pkg-synopsis">
						Package eureka provides Instancer and Registrar implementations for Netflix OSS&#39;s Eureka
					</td>
				</tr>
			
				<tr>
				
					<td class="pkg-name" style="padding-left: 0px;">
						<a href="lb/index.html">lb</a>
					</td>
				
					<td class="pkg-synopsis">
						Package lb implements the client-side load balancer pattern.
					</td>
				</tr>
			
				<tr>
				
					<td class="pkg-name" style="padding-left: 0px;">
						<a href="zk/index.html">zk</a>
					</td>
				
					<td class="pkg-synopsis">
						Package zk provides Instancer and Registrar implementations for ZooKeeper.
					</td>
				</tr>
			
		</table>
	</div>



<div id="footer">
Build version go1.19.10.<br>
Except as <a href="https://developers.google.com/site-policies#restrictions">noted</a>,
the content of this page is licensed under the
Creative Commons Attribution 3.0 License,
and code is licensed under a <a href="http://localhost:6060/LICENSE">BSD license</a>.<br>
<a href="https://golang.org/doc/tos.html">Terms of Service</a> |
<a href="https://www.google.com/intl/en/policies/privacy/">Privacy Policy</a>
</div>

</div><!-- .container -->
</div><!-- #page -->
</body>
</html>
